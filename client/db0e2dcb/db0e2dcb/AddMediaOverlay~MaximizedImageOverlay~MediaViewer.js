(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1622:function(e,t,i){"use strict";var a=i(0);i(612),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(i(35)),n=a(i(84)),r=a(i(42)),s=a(i(1)),l=a(i(14)),d=a(i(38)),u=a(i(18)),c=a(i(43));class h extends s.default.Component{constructor(e){super(e),this.makeRequest=e=>(this.networkPromises.push(e),e.finally(()=>{this.networkPromises.splice(this.networkPromises.indexOf(e),1)}),e),this.onInitialDataFetch=()=>{},this.refetch=()=>this.isUnmounting||!this._managedFetchData?l.default.resolve():this.makeRequest(this._managedFetchData()),this.setUnmounting=()=>{this.isUnmounting=!0},this.state={},this.hasFetched=!1,this.mutationEvents=[],this.onDataFetchEvent=void 0,this.networkPromises=[],this.listeners=[]}render(){throw new Error("DataStore should not be rendered.")}componentDidMount(){this.fetchData&&(this._managedFetchData=()=>(this.fetchDataPromise&&this.fetchDataPromise.cancel(),null!=this.state.networkError&&this.setState({networkError:null}),this.fetchDataPromise=this.fetchData().then(e=>(this.hasFetched=!0,this.onDataFetchEvent&&d.default.emit(this.onDataFetchEvent,e),e)).catch(e=>{let t;u.default.IsNative&&!c.default.IsProd&&window.hostname,window.lastError=e;try{t=JSON.stringify(e)}catch(e){}const i="timeout"===e.statusText;!i&&e.status&&(n.default.LogException(e,{tags:{errorSource:"DataStoreV1"},extra:{fetchFunction:this.fetchData&&this.fetchData.toString&&this.fetchData.toString()}}),r.default.Log(o.default.DataStoreError,{errorString:(e&&e.toString&&e.toString()||"").slice(0,64),errorStringified:(t||"").slice(0,64),url:window.location.path+window.location.search,lastSentryEventId:n.default.GetLastEventId()})),this.setState({networkError:{isTimeout:i}})}),this.fetchDataPromise),this.dontFetchOnMount||this.makeRequest(this._managedFetchData().then(this.onInitialDataFetch))),this.mutationEvents.forEach(e=>{d.default.on(e,this.refetch)}),this.listeners.forEach(e=>{d.default.on(e.event,e.action)})}componentWillUnmount(){this.networkPromises.forEach(e=>{e.cancel()}),this.networkPromises.length||delete this.networkPromises,this.setUnmounting(),this.mutationEvents.forEach(e=>{d.default.removeListener(e,this.fetchData)}),delete this.mutationEvents,this.listeners.forEach(e=>{d.default.removeListener(e.event,e.action)}),delete this.listeners}}var f=h;t.default=f},4325:function(e,t,i){"use strict";var a=i(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=a(i(6)),r=a(i(23)),s=a(i(71)),l=a(i(1)),d=a(i(38)),u=a(i(11)),c=a(i(271));a(i(14));var h=(0,a(i(10)).default)({name:"VideoOverlayInterceptor",loader:()=>i(4528)})(o=class extends l.default.Component{constructor(){super(),this._handleClick=()=>{const{src:e}=this.props;this.mediaItem||(this.mediaItem={type:"video",id:r.default.rstr(),createdAt:Date.now().toString(),additionalInfo:{externalVideoSrc:e}}),this.setState({overlayActive:!0}),d.default.emit(s.default.MediaItemClicked,this.mediaItem),d.default.on(s.default.VideoDestroyed,this._handleVideoDestroyed)},this._handleVideoDestroyed=e=>{this.mediaItem===e&&this.setState({overlayActive:!1})},this.state={}}shouldComponentUpdate(e,t){return(0,c.default)(this,e,t)}componentWillUnmount(){d.default.removeListener(s.default.VideoDestroyed,this._handleVideoDestroyed)}render(){const{className:e}=this.props,{overlayActive:t}=this.state;return(0,n.default)("div",{className:(0,u.default)(e,"VideoOverlayInterceptor-container",{"VideoOverlayInterceptor-container-overlay-active":t})},void 0,(0,n.default)("div",{className:"VideoOverlayInterceptor-wrapper"},void 0,this.props.children),(0,n.default)("div",{className:"VideoOverlayInterceptor-click-jack",onClick:this._handleClick}))}})||o;t.default=h},4326:function(e,t,i){"use strict";var a=i(0);i(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n,r,s,l,d,u,c=a(i(12)),h=a(i(3)),f=(a(i(13)),a(i(186))),p=a(i(23)),v=a(i(1)),m=i(2),y=i(4),g=(a(i(14)),a(i(334))),w=a(i(10));var b=(o=(0,w.default)({name:"StretchIframe",loader:()=>i(4530)}),n=m.computed.struct,o(r=(0,y.observer)((s=class extends v.default.Component{constructor(...e){super(...e),(0,c.default)(this,"lastParentWidth",l,this),(0,c.default)(this,"lastParentHeight",d,this),(0,c.default)(this,"_resize",u,this)}get width(){const{lastParentWidth:e,maxWidth:t=3e3}=this;return e?Math.min(e,t):null}get height(){const{width:e}=this,{heightRatio:t=9/16}=this.props;return e*t}get iframeStyle(){const{height:e,width:t}=this;return{width:"".concat(t,"px"),height:"".concat(e,"px"),maxHeight:f.default.windowDimensions.height}}render(){const{src:e,allow:t}=this.props,{iframeStyle:i}=this;return v.default.createElement("iframe",{ref:e=>this.frame=(0,g.default)(e),style:i,src:p.default.addHttpsIfNecessary(e),scrolling:"no",frameBorder:"0",allowFullScreen:!0,allow:t})}componentDidMount(){this.parent=this.frame.parent(),this._resize(),this.resizeInterval=setInterval(this._resize,500)}componentWillUnmount(){clearInterval(this.resizeInterval)}},l=(0,h.default)(s.prototype,"lastParentWidth",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=(0,h.default)(s.prototype,"lastParentHeight",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),(0,h.default)(s.prototype,"width",[m.computed],Object.getOwnPropertyDescriptor(s.prototype,"width"),s.prototype),(0,h.default)(s.prototype,"height",[m.computed],Object.getOwnPropertyDescriptor(s.prototype,"height"),s.prototype),(0,h.default)(s.prototype,"iframeStyle",[n],Object.getOwnPropertyDescriptor(s.prototype,"iframeStyle"),s.prototype),u=(0,h.default)(s.prototype,"_resize",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.lastParentWidth=this.parent.width(),this.lastParentHeight=this.parent.height()}}}),r=s))||r)||r);t.default=b},4483:function(e,t,i){"use strict";var a=i(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=a(i(20)),r=a(i(6)),s=a(i(15)),l=a(i(198)),d=a(i(23)),u=a(i(48)),c=a(i(18)),h=a(i(71)),f=a(i(4527)),p=a(i(917)),v=a(i(109)),m=a(i(242)),y=a(i(1622)),g=a(i(4501)),w=a(i(1)),b=a(i(38)),I=a(i(11)),x=a(i(271));a(i(14));function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function S(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(Object(i),!0).forEach((function(t){(0,s.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var D=(0,a(i(10)).default)({name:"GuildedVideo",loader:()=>i(4536)})(o=class extends y.default{constructor(e){if(super(e),this.state={},e.video&&"xbox"===e.video.socialLinkSource){e.video&&e.video.additionalInfo&&e.video.additionalInfo.videoExpiration&&(0,u.default)(e.video.additionalInfo.videoExpiration);this.state=S(S({},this.state),{},{isLoadingMediaUrl:!0}),this.fetchData=()=>m.default.getXboxMediaDownloadUrl({mediaId:e.video.id,infoUrl:e.video.infoUrl||e.video.additionalInfo&&e.video.additionalInfo.infoUrl}).then(e=>{if(!e)throw new Error("no response to download URL");this.setState({isLoadingMediaUrl:!1,videoSrc:e.url})})}}shouldComponentUpdate(e,t){return(0,x.default)(this,e,t)}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount();const{video:e}=this.props;b.default.emit(h.default.VideoDestroyed,e)}render(){const{video:e,autoPlay:t,className:i}=this.props,{videoSrc:a,isLoadingMediaUrl:o}=this.state,s="string"!=typeof e&&("twitch"===e.socialLinkSource||e.additionalInfo&&e.additionalInfo.externalVideoSrc&&e.additionalInfo.externalVideoSrc.indexOf("twitch.tv")>-1),u=e.type===l.default.Video&&!s&&e.additionalInfo.externalVideoSrc;let h;return e.type===l.default.Video&&s&&!c.default.IsNative?h=(0,r.default)(f.default,{autoPlay:t,videoId:e.serviceId,src:e.additionalInfo.externalVideoSrc}):u&&!c.default.IsNative?h=(0,r.default)(g.default,{autoPlay:t,src:e.additionalInfo.externalVideoSrc}):(u||s)&&c.default.IsNative?h=(0,r.default)(p.default,{url:e.additionalInfo.externalVideoSrc,forceEmbed:!0}):e.type===l.default.Video&&(a||e.additionalInfo.videoSrc)&&(h=(0,r.default)("div",{className:"GuildedVideo-video-wrapper"},void 0,w.default.createElement("video",(0,n.default)({},this.props,{controls:!0,autoPlay:!0,loop:!0,key:a||!o&&e.additionalInfo.videoSrc||"loading",poster:d.default.addHttpsIfNecessary(e.src),name:"media"}),(0,r.default)("source",{src:a||!o&&e.additionalInfo.videoSrc,type:"video/mp4"})))),(0,r.default)("div",{className:(0,I.default)({"GuildedVideo-container":!0,"GuildedVideo-container-loading":o},i)},void 0,h,o&&(0,r.default)("div",{className:"GuildedVideo-loader"},void 0,(0,r.default)(v.default,{white:!0})))}})||o;t.default=D},4501:function(e,t,i){"use strict";var a=i(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=a(i(6)),r=a(i(4325)),s=a(i(18)),l=a(i(4326)),d=a(i(1)),u=a(i(271));a(i(14));var c=(0,a(i(10)).default)({name:"YoutubeEmbed",loader:()=>i(4534)})(o=class extends d.default.Component{constructor(){super(),this.state={}}shouldComponentUpdate(e,t){return(0,u.default)(this,e,t)}render(){const{src:e,videoId:t,autoPlay:i,useVideoOverlay:a}=this.props,o=e?e+(i?"".concat(e.indexOf("?")>0?"&":"?","autoplay=1"):""):"https://www.youtube.com/embed/".concat(t).concat(i?"?autoplay=1":""),d=(0,n.default)(l.default,{src:o,allow:i?"autoplay":void 0});return s.default.IsDesktop&&a?(0,n.default)(r.default,{className:"YoutubeEmbed-container",src:o},void 0,d):(0,n.default)("div",{className:"YoutubeEmbed-container"},void 0,d)}})||o;t.default=c},4527:function(e,t,i){"use strict";var a=i(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=a(i(6)),r=a(i(387)),s=a(i(699)),l=a(i(4325)),d=a(i(18)),u=a(i(4326)),c=a(i(1)),h=a(i(271));a(i(14));var f=(0,a(i(10)).default)({name:"TwitchEmbed",loader:()=>i(4532)})(o=class extends c.default.Component{constructor(){super(),this.state={}}shouldComponentUpdate(e,t){return(0,h.default)(this,e,t)}render(){const{src:e,videoId:t,channelName:i,useVideoOverlay:a,autoPlay:o}=this.props,c=s.default[r.default.ExternalSiteTypes.Twitch].embedUrlParams.parent;let h=t?"https://player.twitch.tv/?video=".concat(t,"&parent=").concat(c):i?"https://player.twitch.tv/?channel=".concat(i,"&parent=").concat(c):"".concat(e,"&parent=").concat(c);o&&(h+="&autoplay=true");const f=(0,n.default)(u.default,{src:h});return d.default.IsDesktop&&a?(0,n.default)(l.default,{className:"TwitchEmbed-container",src:h},void 0,f):(0,n.default)("div",{className:"TwitchEmbed-container"},void 0,f)}})||o;t.default=f},4528:function(e,t,i){var a=i(7),o=i(4529);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var n,r=0,s={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};o.locals&&(l.locals=o.locals),l.use=function(e){return r++||(n=a(o,{...s,...e})),l},l.unuse=function(){r>0&&!--r&&(n(),n=null)},e.exports=l},4529:function(e,t,i){(t=i(8)(!1)).push([e.i,".VideoOverlayInterceptor-container{position:relative}.VideoOverlayInterceptor-wrapper{pointer-events:none}.VideoOverlayInterceptor-click-jack{position:absolute;width:100%;height:100%;left:0;top:0;cursor:pointer}.VideoOverlayInterceptor-container-overlay-active{opacity:.3;filter:blur(3px)}",""]),e.exports=t},4530:function(e,t,i){var a=i(7),o=i(4531);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var n,r=0,s={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};o.locals&&(l.locals=o.locals),l.use=function(e){return r++||(n=a(o,{...s,...e})),l},l.unuse=function(){r>0&&!--r&&(n(),n=null)},e.exports=l},4531:function(e,t,i){(t=i(8)(!1)).push([e.i,"",""]),e.exports=t},4532:function(e,t,i){var a=i(7),o=i(4533);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var n,r=0,s={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};o.locals&&(l.locals=o.locals),l.use=function(e){return r++||(n=a(o,{...s,...e})),l},l.unuse=function(){r>0&&!--r&&(n(),n=null)},e.exports=l},4533:function(e,t,i){(t=i(8)(!1)).push([e.i,"",""]),e.exports=t},4534:function(e,t,i){var a=i(7),o=i(4535);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var n,r=0,s={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};o.locals&&(l.locals=o.locals),l.use=function(e){return r++||(n=a(o,{...s,...e})),l},l.unuse=function(){r>0&&!--r&&(n(),n=null)},e.exports=l},4535:function(e,t,i){(t=i(8)(!1)).push([e.i,".YoutubeEmbed-container{margin-left:auto;margin-right:auto}",""]),e.exports=t},4536:function(e,t,i){var a=i(7),o=i(4537);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var n,r=0,s={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};o.locals&&(l.locals=o.locals),l.use=function(e){return r++||(n=a(o,{...s,...e})),l},l.unuse=function(){r>0&&!--r&&(n(),n=null)},e.exports=l},4537:function(e,t,i){(t=i(8)(!1)).push([e.i,".GuildedVideo-container{position:relative}.GuildedVideo-container .MaximizedImageOverlay-video-wrapper{transition:opacity 200ms linear;opacity:1}.GuildedVideo-container-loading .MaximizedImageOverlay-video-wrapper{opacity:.8}.GuildedVideo-container .MaximizedImageOverlay-video-wrapper{margin:0 auto;max-width:100%;width:100%}.GuildedVideo-loader{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1;top:0;display:flex;flex-direction:column;flex:0 0 auto;align-content:center;align-items:center;justify-content:center}.GuildedVideo-video-wrapper > video{max-width:100%;width:100%}",""]),e.exports=t}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/AddMediaOverlay~MaximizedImageOverlay~MediaViewer.js.map