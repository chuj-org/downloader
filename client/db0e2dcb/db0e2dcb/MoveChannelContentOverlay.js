(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{4709:function(e,t,n){"use strict";var o=n(0);n(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,s,l,u,i=o(n(6)),d=n(14),p=o(n(3)),c=o(n(7984)),h=o(n(22)),f=o(n(333)),m=o(n(448)),C=o(n(1009)),v=o(n(46)),y=o(n(295)),I=o(n(114)),g=o(n(68)),b=o(n(273)),x=o(n(155)),T=o(n(1)),w=o(n(204)),M=o(n(25)),O=n(2),S=n(4);var _=(r=(0,o(n(10)).default)({name:"MoveChannelContentOverlay",loader:()=>n(9952)}),a=O.computed.struct,s=O.computed.struct,r(l=(0,c.default)(l=(0,M.default)(l=(0,x.default)(l=(0,v.default)(l=(0,m.default)(l=(0,h.default)(l=(0,w.default)(l=(0,S.observer)((u=class extends T.default.Component{constructor(...e){var t;super(...e),t=this,this.ControlConfiguration=b.default.ConfirmAndCancel,this.ConfirmText="Move",this.Header=this.props.header||"Move content",this.IsContentScrollable=!1,this._handleChange=({values:e})=>{var t;return this.targetChannelId=null===(t=e.channel)||void 0===t?void 0:t.id},this.Confirm=(0,d.coroutine)((function*(){const{sourceChannel:e,moveChannelContentType:n,moveChannelContent:o}=t.props,{targetChannelId:r}=t;try{return yield y.default.MoveContent({contentType:n,contentInfo:o,fromChannelId:e.id,moveToChannelId:r}),{movedToChannelId:r}}catch(e){t.statusContext.displayError({error:e})}}))}get options(){const{sourceChannel:e,moveChannelContentType:t}=this.props,{channels:n,channelsById:o,categoriesById:r}=this.teamChannelsContext,{memberInfo:a,teamInfo:s}=this.teamContext,{groupsByTeamId:l}=this.groupsContext,{userId:u}=this.userContext;return n.filter(n=>{var i;if(n.id===e.id||n.contentType!==e.contentType||!n.isActive)return!1;const d=o[n.parentChannelId],{channelUserPermissions:p,channelRolesById:c}=C.default.GetChannelMembershipRoleOptions({channel:d||n,categoriesById:r}),h=C.default.GetChannelMembershipRole({channelRolesById:c,teamInfo:s,memberInfo:a,channelUserPermissions:p}),m=null==l?void 0:null===(i=l[s.id])||void 0===i?void 0:i[n.groupId];return!!f.default.GetIsGroupActive({groupInfo:m,userId:u,membershipRole:h})&&(null==h?void 0:h.CanCreateChannelContent({contentType:t}))}).map(e=>({value:e.id,id:e.id,label:e.name,iconName:e.iconName}))}get Disabled(){const{options:e}=this;return!e.length}get formSpecs(){const{options:e}=this;return{sections:[{id:"Move",fieldSpecs:[{type:g.default.Dropdown,fieldName:"channel",options:e,defaultValue:e[0],useFuzzySort:!0,autoFocus:!0,optionSubLabelRenderer:this._handleRenderGroupAvatar,grow:!0}]}]}}render(){const{formSpecs:e}=this;return(0,i.default)(I.default,{onChange:this._handleChange,formSpecs:e,autoFocus:!0})}},(0,p.default)(u.prototype,"options",[a],Object.getOwnPropertyDescriptor(u.prototype,"options"),u.prototype),(0,p.default)(u.prototype,"Disabled",[O.computed],Object.getOwnPropertyDescriptor(u.prototype,"Disabled"),u.prototype),(0,p.default)(u.prototype,"formSpecs",[s],Object.getOwnPropertyDescriptor(u.prototype,"formSpecs"),u.prototype),l=u))||l)||l)||l)||l)||l)||l)||l)||l)||l);t.default=_},7984:function(e,t,n){"use strict";var o=n(0);n(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,o;return(0,l.default)(t=(0,s.default)(t=(0,a.default)((o=n=class extends e{constructor(...e){super(...e),this._handleRenderGroupAvatar=e=>{const t=e.value,n=this.teamChannelsContext.channelsById[t]||this.chatContext.temporalChannelsById[t],{groupsById:o}=this.teamContext,a=o[null==n?void 0:n.groupId];return a&&(0,r.default)(u.default,{group:a,size:i.default.IsNative?16:"xs"})}}},n.displayName=e.displayName||e.name,t=o))||t)||t)||t};var r=o(n(6)),a=o(n(158)),s=o(n(155)),l=o(n(25)),u=o(n(314)),i=(o(n(1)),n(2),o(n(18)))},9952:function(e,t,n){var o=n(7),r=n(9953);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var a,s=0,l={injectType:"lazyStyleTag",insert:"head",singleton:!1},u={};r.locals&&(u.locals=r.locals),u.use=function(e){return s++||(a=o(r,{...l,...e})),u},u.unuse=function(){s>0&&!--s&&(a(),a=null)},e.exports=u},9953:function(e,t,n){(t=n(8)(!1)).push([e.i,"",""]),e.exports=t}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/MoveChannelContentOverlay.js.map