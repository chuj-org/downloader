(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{4463:function(e,t,r){"use strict";var a=r(0),i=r(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(15)),s=a(r(40)),o=i(r(14)),u=a(r(5055)),c=r(2),d=a(r(5057)),l=a(r(941)),p=a(r(5058)),b=a(r(17));const m=["teamId"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=class{static CreatePaymentAccount({teamId:e,country:t,options:r={}}){return(0,o.coroutine)((function*(){return(0,b.default)(e,"teamId is required"),p.default.createPaymentAccount({teamId:e,country:t,options:r})}))()}static DeletePaymentAccount(e){return(0,o.coroutine)((function*(){let{teamId:t}=e,r=(0,s.default)(e,m);return(0,b.default)(t,"teamId is required"),p.default.deletePaymentAccount(v({teamId:t},r))}))()}static CreateAccountLink({teamId:e}){return(0,o.coroutine)((function*(){return(0,b.default)(e,"teamId is required"),p.default.createAccountLink({teamId:e})}))()}static CreateLoginLink({teamId:e}){return(0,o.coroutine)((function*(){return(0,b.default)(e,"teamId is required"),p.default.createLoginLink({teamId:e})}))()}static GetServerBalance({teamId:e}){return(0,o.coroutine)((function*(){return(0,b.default)(e,"teamId is required"),p.default.getServerBalance({teamId:e})}))()}static GetServerBalanceTransactions({teamId:e}){return(0,o.coroutine)((function*(){return(0,b.default)(e,"teamId is required"),p.default.getServerBalanceTransactions({teamId:e})}))()}static GetServerMonthlyEarnings({teamId:e}){return(0,o.coroutine)((function*(){(0,b.default)(e,"teamId is required");const t=yield p.default.getServerMonthlyEarnings({teamId:e});return(0,c.runInAction)(()=>t.map(e=>new d.default(e)))}))()}static CreateServerSubscriptionPlan({teamId:e,serverSubscriptionPlan:t}){return(0,o.coroutine)((function*(){return(0,b.default)(e,"teamId is required"),(0,b.default)(t,"serverSubscriptionPlan is required"),t=yield p.default.createServerSubscriptionPlan(v({teamId:e},t)),new l.default(t)}))()}static UpdateServerSubscriptionPlan({teamId:e,serverSubscriptionPlanId:t,serverSubscriptionPlan:r}){return(0,o.coroutine)((function*(){return(0,b.default)(e,"teamId is required"),(0,b.default)(t,"serverSubscriptionPlanId is required"),r=yield p.default.updateServerSubscriptionPlan(v({teamId:e,serverSubscriptionPlanId:t},r)),new l.default(r)}))()}static GetServerSubscriptionPlans({teamId:e}){return(0,o.coroutine)((function*(){return(0,b.default)(e,"teamId is required"),(yield p.default.getServerSubscriptionPlans({teamId:e})).map(e=>new l.default(e))}))()}static GetServerSubscriptionPlan({teamId:e,serverSubscriptionPlanId:t}){return(0,o.coroutine)((function*(){(0,b.default)(e,"teamId is required"),(0,b.default)(t,"serverSubscriptionPlanId is required");const r=yield p.default.getServerSubscriptionPlan({teamId:e,serverSubscriptionPlanId:t});return new l.default(r)}))()}static DeleteServerSubscriptionPlan({teamId:e,serverSubscriptionPlanId:t}){return(0,o.coroutine)((function*(){return(0,b.default)(e,"teamId is required"),(0,b.default)(t,"serverSubscriptionPlanId is required"),p.default.deleteServerSubscriptionPlan({teamId:e,serverSubscriptionPlanId:t})}))()}static SubscribeToServer({teamId:e,serverSubscriptionPlanId:t}){return(0,b.default)(e,"teamId is required"),(0,b.default)(t,"serverSubscriptionPlanId is required"),p.default.subscribeToServer({teamId:e,serverSubscriptionPlanId:t})}static AddSubscribedMessageToMemberServerSubscription({teamId:e,subscribedLogId:t,subscribedMessage:r}){return(0,b.default)(t,"subscribedLogId is required"),(0,b.default)(e,"teamId is required"),(0,b.default)(r,"subscribedMessage is required"),p.default.addSubscribedMessageToMemberServerSubscription({teamId:e,subscribedLogId:t,subscribedMessage:r})}static GetServerSubscription({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.getServerSubscription({teamId:e})}static GetServerSubscriptions({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.getServerSubscriptions({teamId:e})}static GetServerStripeSubscription({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.getServerStripeSubscription({teamId:e})}static CancelServerSubscription({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.cancelServerSubscription({teamId:e})}static UpdateServerSubscription({teamId:e,serverSubscriptionPlanId:t}){return(0,b.default)(e,"teamId is required"),p.default.updateServerSubscription({teamId:e,serverSubscriptionPlanId:t})}static GetServerSubscriptionInvoices({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.getServerSubscriptionInvoices({teamId:e})}static GetServerSubscriptionUpcomingInvoice({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.getServerSubscriptionUpcomingInvoice({teamId:e})}static PayServerSubscriptionInvoice({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.payServerSubscriptionInvoice({teamId:e})}static GetSubscriberPaymentInstruments({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.getSubscriberPaymentInstruments({teamId:e})}static GetSubscriptionCharge({teamId:e,stripeChargeId:t}){return(0,b.default)(e,"teamId is required"),(0,b.default)(t,"stripeChargeId is required"),p.default.getSubscriptionCharge({teamId:e,stripeChargeId:t})}static GetRecentActivity({teamId:e,beforeDate:t}){return(0,o.coroutine)((function*(){(0,b.default)(e,"teamId is required");const r=yield p.default.getRecentActivity({teamId:e,beforeDate:t});return(0,c.runInAction)(()=>r.map(e=>new u.default(e)))}))()}static SetOnboardingAddTierCompletedAt({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.setOnboardingAddTierCompletedAt({teamId:e})}static SetOnboardingStripeAccountOnboardedAt({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.setOnboardingStripeAccountOnboardedAt({teamId:e})}static SetOnboardingCompletedAt({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.setOnboardingCompletedAt({teamId:e})}static EnableServerSubscriptions({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.enableServerSubscriptions({teamId:e})}static DisableServerSubscriptions({teamId:e}){return(0,b.default)(e,"teamId is required"),p.default.disableServerSubscriptions({teamId:e})}static GetUserTeamsServerSubscriptionInfo(){return p.default.getUserTeamsServerSubscriptionInfo()}}},4739:function(e,t,r){"use strict";var a=r(0);r(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n,s,o=r(14),u=a(r(12)),c=a(r(3)),d=(a(r(13)),a(r(1635))),l=a(r(4463)),p=a(r(25)),b=a(r(1621)),m=r(2),f=r(4);var v=(0,p.default)(i=(0,f.observer)((n=class extends b.default{constructor(...e){var t;super(...e),t=this,(0,u.default)(this,"allowForceDelete",s,this),this.Header="Delete subscription account",this.ConfirmationText="Are you sure you want to delete your subscription account? You cannot undo this action",this.Confirm=(0,o.coroutine)((function*(){const{teamId:e,teamInfo:r}=t.teamContext;try{const r={teamId:e};t.allowForceDelete&&(r.bypassNonZeroBalanceCheck=!0),yield l.default.DeletePaymentAccount(r)}catch(e){var a;if(null===(a=e.responseJSON.meta)||void 0===a?void 0:a.allowForceDelete)throw(0,m.runInAction)(()=>{t.allowForceDelete=e.responseJSON.meta.allowForceDelete}),new d.default;throw e}r.deleteTeamPaymentInfo()}))}get WarningText(){return!this.allowForceDelete&&"Your Stripe account will be deleted. You will not be able to recover any subscription data after deleting your subscription account."}get VerificationPhrase(){return this.allowForceDelete&&"Force delete"}get VerificationActionName(){return this.allowForceDelete&&"force delete"}get ErrorText(){return this.allowForceDelete&&"Your stripe account has a small, but not zero balance. Please request a payout in Stripe before proceeding. If Stripe is not allowing a payout because your balance is too low, you can attempt to force delete it. Forcing deletion will cause you to lose any remaining balance in your account, and you will not be able to recover any subscription data after deleting your subscription account."}},s=(0,c.default)(n.prototype,"allowForceDelete",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),(0,c.default)(n.prototype,"WarningText",[m.computed],Object.getOwnPropertyDescriptor(n.prototype,"WarningText"),n.prototype),(0,c.default)(n.prototype,"VerificationPhrase",[m.computed],Object.getOwnPropertyDescriptor(n.prototype,"VerificationPhrase"),n.prototype),(0,c.default)(n.prototype,"VerificationActionName",[m.computed],Object.getOwnPropertyDescriptor(n.prototype,"VerificationActionName"),n.prototype),(0,c.default)(n.prototype,"ErrorText",[m.computed],Object.getOwnPropertyDescriptor(n.prototype,"ErrorText"),n.prototype),i=n))||i)||i;t.default=v},5055:function(e,t,r){"use strict";var a=r(0);r(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n,s=a(r(15)),o=a(r(12)),u=a(r(3)),c=(a(r(13)),a(r(5056))),d=r(2);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}let b=(i=class extends c.default{constructor(...e){super(...e),(0,o.default)(this,"data",n,this)}updateData({partialData:e}){this.data=p(p({},this.data),e)}},n=(0,u.default)(i.prototype,"data",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i);t.default=b},5056:function(e,t,r){"use strict";var a=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(55)),n=r(75);t.default=class{constructor(e){this[n.ModelComparatorKey]=e.id,Object.assign(this,e),this.createdAt=(0,i.default)(e.createdAt)}}},5057:function(e,t,r){"use strict";var a=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(55)),n=a(r(17)),s=(r(2),r(75));t.default=class{constructor(e){(0,n.default)(e,"earningsInfo is required"),this.id=e.txMonth,this[s.ModelComparatorKey]="".concat(e.txMonth,"-").concat(e.grossAvailable+e.grossPending),Object.assign(this,e),this.month=(0,i.default)(e.txMonth),this.grossEarnings=e.grossAvailable+e.grossPending,this.netEarnings=e.netAvailable+e.netPending}}},5058:function(e,t,r){"use strict";var a=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(15)),n=a(r(40)),s=a(r(194)),o=(a(r(14)),a(r(73))),u=r(152);const c=["teamId","options"],d=["teamId"],l=["teamId"],p=["teamId","serverSubscriptionPlanId"],b=["teamId"],m=["teamId"],f=["teamId"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}const S={withCredentials:!0};var I={createPaymentAccount:e=>{let{teamId:t,options:r={}}=e,a=(0,n.default)(e,c);return(0,u.GuildedRequest)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(t,"/server_subscriptions/payment_account"),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(a)},r))},deletePaymentAccount:e=>{let{teamId:t}=e,r=(0,n.default)(e,d);return(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(t,"/server_subscriptions/payment_account"),type:"DELETE",contentType:"application/json",dataType:"json",data:JSON.stringify(r)})},createAccountLink:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/account_link"),type:"POST",contentType:"application/json",dataType:"json"}),createLoginLink:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/login_link"),type:"POST",contentType:"application/json",dataType:"json"}),getServerBalance:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/balance"),type:"GET"}),getServerBalanceTransactions:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/balance_transactions"),type:"GET"}),getServerMonthlyEarnings:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/monthly_earnings"),type:"GET"}),createServerSubscriptionPlan:e=>{let{teamId:t}=e,r=(0,n.default)(e,l);return(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(t,"/server_subscriptions/plans"),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(r)})},updateServerSubscriptionPlan:e=>{let{teamId:t,serverSubscriptionPlanId:r}=e,a=(0,n.default)(e,p);return(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(t,"/server_subscriptions/plans/").concat(r),type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(a)})},getServerSubscriptionPlans:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/plans"),type:"GET"}),getServerSubscriptionPlan:({teamId:e,serverSubscriptionPlanId:t})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/plans/").concat(t),type:"GET"}),deleteServerSubscriptionPlan:({teamId:e,serverSubscriptionPlanId:t})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/plans/").concat(t),type:"DELETE"}),subscribeToServer:e=>{let{teamId:t}=e,r=(0,n.default)(e,b);return(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(t,"/server_subscriptions/member_subscription"),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(r)})},addSubscribedMessageToMemberServerSubscription:e=>{let{teamId:t}=e,r=(0,n.default)(e,m);return(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(t,"/server_subscriptions/member_subscription/subscribed_message"),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(r)})},getServerSubscription:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/member_subscription"),type:"GET"}),getServerSubscriptions:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/member_subscriptions"),type:"GET"}),getServerStripeSubscription:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/member_subscription_stripe"),type:"GET"}),updateServerSubscription:e=>{let{teamId:t}=e,r=(0,n.default)(e,f);return(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(t,"/server_subscriptions/member_subscription"),type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(r)})},cancelServerSubscription:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/member_subscription"),type:"DELETE",contentType:"application/json",dataType:"json"}),getServerSubscriptionInvoices:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/member_subscription/invoices"),type:"GET"}),getServerSubscriptionUpcomingInvoice:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/member_subscription/invoices/upcoming"),type:"GET"}),payServerSubscriptionInvoice:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/member_subscription/pay"),type:"POST"}),getSubscriberPaymentInstruments:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/member_subscription/payment_instruments"),type:"GET"}),getSubscriptionCharge:({stripeChargeId:e,teamId:t})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(t,"/server_subscriptions/member_subscription/charges/").concat(e),type:"GET"}),getRecentActivity:({teamId:e,beforeDate:t})=>{const r=s.default.stringify({beforeDate:t},{addQueryPrefix:!0});return(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/recent_activity").concat(r),type:"GET"})},setOnboardingAddTierCompletedAt:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/onboarding/complete_add_tier"),type:"PUT"}),setOnboardingStripeAccountOnboardedAt:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/onboarding/onboard_stripe_account"),type:"PUT"}),setOnboardingCompletedAt:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/onboarding/complete"),type:"PUT"}),enableServerSubscriptions:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/enable"),type:"PUT"}),disableServerSubscriptions:({teamId:e})=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/teams/").concat(e,"/server_subscriptions/enable"),type:"DELETE"}),getUserTeamsServerSubscriptionInfo:()=>(0,u.GuildedRequest)({xhrFields:S,url:"".concat(o.default.BaseUrl,"/users/me/teams/server_subscriptions"),type:"GET"})};t.default=I}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/ServerSubscriptionsDeleteAccountOverlay.js.map