(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{4664:function(e,t,a){"use strict";var o=a(0);a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,n,l,s,u,d=o(a(6)),f=a(14),p=o(a(12)),c=o(a(3)),m=(o(a(13)),o(a(1))),y=a(4),h=o(a(9473)),g=o(a(114)),v=o(a(10)),b=o(a(204)),O=o(a(273)),I=a(2);let x=(r=(0,v.default)({name:"UserProfileEditOverlay",loader:()=>a(9474)}),i=I.computed.struct,(0,h.default)(n=(0,b.default)(n=(0,y.observer)(n=r((l=class extends m.default.Component{constructor(...e){var t;super(...e),t=this,this.Header=this.props.header||"Edit profile",this.ConfirmText="Save",this.ControlConfiguration=O.default.ConfirmAndCancel,this.IsUnstyled=!0,(0,p.default)(this,"formValue",s,this),(0,p.default)(this,"_handleChange",u,this),this.Confirm=(0,f.coroutine)((function*(){const{successMessageText:e}=t;(yield t.onConfirm())&&t.statusContext.displayStatus({type:"success",text:e})}))}get successMessageText(){const{successMessageText:e}=this.props;return e||"Profile updated!"}get hasUnsavedChanges(){const{formValue:e}=this;return e&&e.hasChanged}get formSpecs(){const{imageSection:e,textSection:t}=this;return{type:"padded-horizontal",sectionStyle:"border-unpadded",sections:[e,t]}}render(){return(0,d.default)(g.default,{className:"UserProfileEditOverlay-form",formSpecs:this.formSpecs,onChange:this._handleChange})}},s=(0,c.default)(l.prototype,"formValue",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=(0,c.default)(l.prototype,"_handleChange",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.formValue=e}}),(0,c.default)(l.prototype,"successMessageText",[I.computed],Object.getOwnPropertyDescriptor(l.prototype,"successMessageText"),l.prototype),(0,c.default)(l.prototype,"hasUnsavedChanges",[I.computed],Object.getOwnPropertyDescriptor(l.prototype,"hasUnsavedChanges"),l.prototype),(0,c.default)(l.prototype,"formSpecs",[i],Object.getOwnPropertyDescriptor(l.prototype,"formSpecs"),l.prototype),n=l))||n)||n)||n)||n);t.default=x},9473:function(e,t,a){"use strict";var o=a(19),r=a(0);a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,o,r;return(0,p.default)(t=(0,s.default)(t=(0,u.default)((r=o=class extends e{constructor(...e){var t;super(...e),t=this,this.ValidateUserUrl=(0,m.ValidateAsCaseInsensitive)(m.default.ValidateUserUrl,()=>{var e;return null===(e=this.userContext.userInfo)||void 0===e?void 0:e.subdomain}),this.onConfirm=(0,n.coroutine)((function*(){const{formValue:e}=t;try{yield t.SaveChanges(e)}catch(e){return t.statusContext.displayError({message:e.friendlyMessage||"Could not save changes",error:e}),!1}return!0})),this.SaveChanges=function(){var e=(0,n.coroutine)((function*({changedValues:e}){const{userInfo:a,userId:o}=t.userContext;let r=O({},e),i=!1;if((r.name||r.subdomain)&&(i=!0),"tagline"in r&&(r.aboutInfo=O(O({},a.aboutInfo),{},{tagLine:r.tagline}),i=!0),"bio"in r&&(r.aboutInfo=r.aboutInfo?O({},r.aboutInfo):O({},a.aboutInfo),r.aboutInfo.bio=r.bio,i=!0),r.avatar){const e=yield t.makeRequest(c.default.UpdateUserProfilePicture({imageUrl:r.avatar}));r=O(O({},r),e)}if(r.banner){const e=yield t.makeRequest(c.default.UpdateUserBannerImage({imageUrl:r.banner}));r=O(O({},r),e)}var n,l;Object.keys(r).length&&(i&&(yield t.makeRequest(c.default.UpdateUserProfile(O({userId:o},r)))),a.updateUserInfo(r),null===(n=t.userProfileContext)||void 0===n||null===(l=n.userProfile)||void 0===l||l.updateUserInfo(r))}));return function(t){return e.apply(this,arguments)}}()}get Disabled(){const{isMakingRequest:e,formValue:t}=this;return e||!t||!t.isValid||!this.hasUnsavedChanges}get imageSection(){const{userInfo:e}=this.userContext;return{rowMarginSize:"md-lg",fieldSpecs:[{type:d.default.Image,fieldName:"avatar",label:"Avatar",aspectRatio:1,maxWidth:v.default.IsNative?80:60,maxHeight:v.default.IsNative?80:60,instructions:"We recommend an image that's at least 256x256",isOptional:!0,defaultValue:e.profilePicture,buttonLabel:"Upload avatar",imageStyle:"rounded",friendlyUploadName:"profile avatar",dynamicMediaTypeId:y.default.UserAvatar.Id,displayFormat:y.default.UserAvatar.OutputFormats.Small.Name,isConfirmWide:v.default.IsNative,confirmTestID:"EditProfileUploadAvatarButton"},{type:d.default.Image,fieldName:"banner",fullWidthImage:!0,aspectRatio:10/3,maxWidth:550,resizeMode:"cover",label:"Banner",instructions:"We recommend an image that's 1920x300",isOptional:!0,defaultValue:this.showDefaultBackground?null:e.profileBannerSm,emptyPreviewComponent:h.default,emptyPreviewComponentProps:{style:{height:150}},friendlyUploadName:"profile banner",buttonLabel:"Upload banner",dynamicMediaTypeId:y.default.UserBanner.Id,displayFormat:y.default.UserBanner.OutputFormats.HeroMd.Name,imageStyle:"position-centered",isConfirmWide:v.default.IsNative,confirmTestID:"EditProfileUploadBannerButton"}].filter(Boolean)}}get textSection(){const{userInfo:e}=this.userContext;return{rowMarginSize:"md-lg",fieldSpecs:[{type:d.default.Text,fieldName:"name",label:"Name",isOptional:!1,defaultValue:null==e?void 0:e.name,validationFunction:m.default.ValidateNameWithRobloxPolicy,showValuePreview:!0,iconName:null,flavor:"dark",editInOverlay:!0,testID:"EditProfileNameInput"},{type:d.default.Text,fieldName:"subdomain",label:"URL",description:v.default.IsNative?null:"This is your unique username.",isOptional:!0,defaultValue:null==e?void 0:e.subdomain,validationFunction:this.ValidateUserUrl,showValuePreview:!0,iconName:null,flavor:"dark",editInOverlay:!0,textFieldDescription:"This is your unique username.",testID:"EditProfileUrlInput"},{type:d.default.TextArea,fieldName:"tagline",label:"Tagline",isOptional:!0,maxLength:g.default.MaxTaglineLength,allowEmptyValue:!0,placeholder:"Add a tagline",defaultValue:null==e?void 0:e.tagLine,showCharactersRemaining:!0,validationFunction:m.default.ValidateTagLine,showValuePreview:!0,iconName:null,flavor:"dark",testID:"EditProfileTaglineInput"},v.default.IsNative&&{type:d.default.TextArea,fieldName:"bio",label:"Bio",isOptional:!0,maxLength:g.default.MaxBioLength,allowEmptyValue:!0,placeholder:"Tell everyone about yourself! What's your story?",defaultValue:null==e?void 0:e.bio,showCharactersRemaining:!0,validationFunction:m.default.ValidateUserBio,showValuePreview:!0,iconName:null,flavor:"dark",testID:"EditProfileBioInput"}].filter(Boolean)}}},o.displayName=e.displayName||e.name,a=r,(0,l.default)(a.prototype,"Disabled",[f.computed],Object.getOwnPropertyDescriptor(a.prototype,"Disabled"),a.prototype),(0,l.default)(a.prototype,"imageSection",[f.computed],Object.getOwnPropertyDescriptor(a.prototype,"imageSection"),a.prototype),(0,l.default)(a.prototype,"textSection",[f.computed],Object.getOwnPropertyDescriptor(a.prototype,"textSection"),a.prototype),t=a))||t)||t)||t};var i=r(a(15)),n=a(14),l=r(a(3)),s=r(a(22)),u=r(a(713)),d=r(a(68)),f=a(2),p=r(a(39)),c=r(a(50)),m=o(a(199)),y=r(a(103)),h=r(a(587)),g=r(a(1628)),v=r(a(18));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},9474:function(e,t,a){var o=a(7),r=a(9475);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i,n=0,l={injectType:"lazyStyleTag",insert:"head",singleton:!1},s={};r.locals&&(s.locals=r.locals),s.use=function(e){return n++||(i=o(r,{...l,...e})),s},s.unuse=function(){n>0&&!--n&&(i(),i=null)},e.exports=s},9475:function(e,t,a){(t=a(8)(!1)).push([e.i,".UserProfileEditOverlay-form{max-width:680px;padding:24px}@media(min-width: 1000px){.UserProfileEditOverlay-form{width:680px}}",""]),e.exports=t}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/UserProfileEditOverlay.js.map