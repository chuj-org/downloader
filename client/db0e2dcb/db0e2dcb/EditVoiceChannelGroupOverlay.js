(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{4284:function(e,t,o){"use strict";var i=o(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,i(o(85)).default)("voiceChannelContext");t.default=r},4721:function(e,t,o){"use strict";var i=o(0),r=o(19);o(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,n,l,u,p,s,d,c,f,m=i(o(6)),h=i(o(12)),v=r(o(14)),b=i(o(3)),g=(i(o(13)),i(o(43))),y=i(o(18)),G=i(o(79)),V=i(o(4284)),C=i(o(78)),P=i(o(427)),I=i(o(199)),O=i(o(25)),L=i(o(68)),w=i(o(114)),x=i(o(273)),D=i(o(204)),S=i(o(1)),_=o(2),U=o(255),T=o(4),j=i(o(349)),z=i(o(64));var N=(a=(0,_.computed)(G.default),n=_.computed.struct,l=_.computed.struct,(0,D.default)(u=(0,O.default)(u=(0,C.default)(u=(0,V.default)(u=(0,T.observer)((p=class extends S.default.Component{constructor(...e){var t;super(...e),t=this,this.ConfirmText="Update",this.ControlConfiguration=x.default.ConfirmAndCancel,this.IsContentScrollable=!1,this.LobbyVoiceGroupOption={label:U.LobbyName,value:U.LobbyGroupId},this.Confirm=(0,v.coroutine)((function*(){var e;const{channelId:o}=t.teamChannelContext,{name:i,voiceGroupParent:r}=t.values,{originalVoiceGroup:a,userLimit:n}=t,l=(null==r?void 0:r.value)===U.LobbyGroupId?null:null==r?void 0:r.value;yield v.default.join(P.default.UpdateVoiceChannelGroupInfo({channelId:o,voiceGroupId:a.id,name:i,userLimit:n}),r&&P.default.UpdateVoiceChannelGroupParent({channelId:o,voiceGroupId:a.id,voiceGroupParentId:l})),null===(e=j.default.GeneralCreation)||void 0===e||e.play(),a.update({name:i,userLimit:n}),r&&a.update({voiceGroupParentId:l})})),(0,h.default)(this,"values",s,this),(0,h.default)(this,"isValid",d,this),(0,h.default)(this,"hasUnsavedChanges",c,this),this.Header="Edit voice room",this._generateSelectedValue=({min:e,max:t})=>t?"".concat(t," ").concat(z.default.Pluralize({amount:t,label:"user"})):"Unlimited",this._validateUserLimit=e=>{const{numParticipants:t}=this,o=e.max;if(o>0&&o<t)return"Cannot set a user limit lower than the number of participants for this voice room."},(0,h.default)(this,"_handleChange",f,this),this._handleKeyboardSubmit=()=>{this.props.onConfirm()}}get Disabled(){return!this.isValid}get originalVoiceGroup(){return this.props.voiceGroup}get originalVoiceGroupId(){return this.originalVoiceGroup.id}get numParticipants(){var e;return(null===(e=this.voiceChannelContext.voiceParticipantIdsByVoiceGroupId[this.originalVoiceGroupId])||void 0===e?void 0:e.length)||0}get voiceGroupParentOptions(){const{voiceGroups:e,subVoiceGroupIdsByParentId:t}=this.voiceChannelContext,{originalVoiceGroupId:o}=this;return[this.LobbyVoiceGroupOption,...e.filter(e=>{var i;return e.id!=o&&!(null===(i=t[o])||void 0===i?void 0:i.includes(e.id))}).map(e=>({label:e.name,value:e.id}))]}get userLimit(){const{originalVoiceGroup:e,values:t}=this;return(null==t?void 0:t.userLimit)?t.userLimit.max:e.userLimit}userLimitToolTipTransform({label:e}){const t=parseInt(e);return!t?"Unlimited":"".concat(t," ").concat(z.default.Pluralize({amount:t,label:"user"}))}get formSpecs(){const{userLimitToolTipTransform:e}=this;return{sections:[{fieldSpecs:[{type:L.default.Text,fieldName:"name",label:"Name",validationFunction:I.default.ValidateGroupName,defaultValue:this.originalVoiceGroup.name},(!y.default.IsDesktop||g.default.IsMock)&&{type:L.default.Dropdown,fieldName:"voiceGroupParent",label:"Parent voice room",options:this.voiceGroupParentOptions,defaultValue:this.voiceGroupParentOptions.find(e=>e.value==this.originalVoiceGroup.voiceGroupParentId)},{type:L.default.Range,fieldName:"userLimit",label:"User Limit",description:"Limit the number of people that can connect to this voice room. Moving people into the room will override the limit.",rangeType:"gilded",size:"lg",labelTooltipTransform:e,selectedValueFunction:this._generateSelectedValue,tooltipDirection:"up",isOptional:!1,defaultValue:{max:this.originalVoiceGroup.userLimit||0},details:{max:U.VoiceMaxUsersPerGroup},lockMinValue:!0,hideLabels:!0,validationFunction:this._validateUserLimit,grow:1}].filter(Boolean)}]}}render(){const{formSpecs:e}=this;return(0,m.default)(w.default,{className:"EditVoiceChannelGroup-container",formSpecs:e,onChange:this._handleChange,onKeyboardSubmit:this._handleKeyboardSubmit,autoFocus:!0,useScrollWrapper:!0})}},s=(0,b.default)(p.prototype,"values",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=(0,b.default)(p.prototype,"isValid",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=(0,b.default)(p.prototype,"hasUnsavedChanges",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,b.default)(p.prototype,"Disabled",[_.computed],Object.getOwnPropertyDescriptor(p.prototype,"Disabled"),p.prototype),(0,b.default)(p.prototype,"originalVoiceGroup",[a],Object.getOwnPropertyDescriptor(p.prototype,"originalVoiceGroup"),p.prototype),(0,b.default)(p.prototype,"originalVoiceGroupId",[_.computed],Object.getOwnPropertyDescriptor(p.prototype,"originalVoiceGroupId"),p.prototype),(0,b.default)(p.prototype,"numParticipants",[_.computed],Object.getOwnPropertyDescriptor(p.prototype,"numParticipants"),p.prototype),(0,b.default)(p.prototype,"voiceGroupParentOptions",[n],Object.getOwnPropertyDescriptor(p.prototype,"voiceGroupParentOptions"),p.prototype),(0,b.default)(p.prototype,"userLimit",[_.computed],Object.getOwnPropertyDescriptor(p.prototype,"userLimit"),p.prototype),(0,b.default)(p.prototype,"formSpecs",[l],Object.getOwnPropertyDescriptor(p.prototype,"formSpecs"),p.prototype),f=(0,b.default)(p.prototype,"_handleChange",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return({values:e,isValid:t,hasChanged:o})=>{this.values=e,this.isValid=t,this.hasUnsavedChanges=o}}}),u=p))||u)||u)||u)||u)||u);t.default=N}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/EditVoiceChannelGroupOverlay.js.map