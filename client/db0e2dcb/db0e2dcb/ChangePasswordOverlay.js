(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{4683:function(e,a,t){"use strict";var r=t(0);t(9),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s,o,d=r(t(6)),n=t(14),i=r(t(3)),l=r(t(204)),u=r(t(244)),c=r(t(419)),f=r(t(21)),p=r(t(114)),g=r(t(24)),w=r(t(9772)),h=r(t(1)),y=t(2),b=t(4);var m=(0,r(t(10)).default)({name:"ChangePasswordOverlay",loader:()=>t(9773)})(s=(0,w.default)(s=(0,l.default)(s=(0,b.observer)((o=class extends h.default.Component{constructor(...e){var a;super(...e),a=this,this.IsRequired=!0,this.ControlConfiguration="ConfirmAndCancel",this.Header="Change password",this.Confirm=(0,n.coroutine)((function*(){return a.ResetPassword()}))}get Disabled(){return!this.isPasswordValid}render(){const{FormSpecs:e,LoggedInText:a,LoggedInSubText:t,ChangePasswordCtaText:r,ContinueText:s,ChangePasswordErrorText:o,showChangePassword:n,showPasswordResetSuccess:i}=this,{onClose:l}=this.props;return(0,d.default)("div",{className:"ChangePasswordOverlay-container"},void 0,i&&(0,d.default)(h.default.Fragment,{},void 0,(0,d.default)(f.default,{className:"ChangePasswordOverlay-check-mark",iconName:"icon-checkmark"}),(0,d.default)(c.default,{className:"ChangePasswordOverlay-intro",title:a,subtitle:t,size:"lg"}),(0,d.default)(u.default,{className:"ChangePasswordOverlay-confirm-cancel",confirmText:s,secondaryActionText:r,onConfirm:l,onSecondaryAction:this.HandleChangePassword,isConfirmWide:!0,hideCancel:!0,isSecondaryActionButtonWide:!0})),n&&(0,d.default)(h.default.Fragment,{},void 0,o&&(0,d.default)(g.default,{type:"subtext",color:"errorRed",block:!0,centered:!0},void 0,o),(0,d.default)(p.default,{className:"ChangePasswordOverlay-form",formSpecs:e,onChange:this.HandleFormChanged,autoFocus:!0})))}},(0,i.default)(o.prototype,"Disabled",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"Disabled"),o.prototype),s=o))||s)||s)||s)||s;a.default=m},9772:function(e,a,t){"use strict";var r=t(0),s=t(19);t(9),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a,t,r,s,w,h,y,b,m,P;return a=g.computed.struct,(0,u.default)((P=m=class extends e{constructor(...e){var a;super(...e),a=this,(0,d.default)(this,"isPasswordValid",s,this),(0,d.default)(this,"currentPasswordInvalid",w,this),this.password=null,this.currentPassword=null,this.invalidateSessions=!0,this.ChangePasswordCtaText="Change password",this.ContinueText="Continue",this.ResetPasswordText="Reset your password",this.ConfirmText="Done",(0,d.default)(this,"HandleChangePassword",h,this),(0,d.default)(this,"HandleFormChanged",y,this),(0,d.default)(this,"OnError",b,this),this.ResetPassword=(0,o.coroutine)((function*(){const{password:e,currentPassword:t,invalidateSessions:r}=a;yield l.default.With(a.makeRequest(p.default.ResetUserPassword({newPassword:e,invalidateSessions:r,currentPassword:t}))).Log(i.default.PasswordChanged),a.statusContext.displayStatus({text:"Password updated!",type:"success"})}))}get verificationFormField(){const{expectedServiceId:e}=this.props;return e?{type:f.default.OAuthVerification,fieldName:"verifiedServiceId",description:"You must re-authorize your account to verify it's really you.",networkType:"roblox",expectedServiceId:e}:{type:f.default.Text,fieldName:"currentPassword",label:"Current password",inputType:"password"}}get FormSpecs(){return{sections:[{fieldSpecs:[this.verificationFormField,{type:f.default.Text,fieldName:"password",label:"New password",inputType:"password",validationFunction:c.default.ValidateNewPassword,showClearField:!0},{type:f.default.Switch,fieldName:"invalidateSessions",label:"Log out all other sessions",isOptional:!1,defaultValue:!0}].filter(Boolean)}],fieldValueReactions:{password:(e,a)=>({passwordRepeat:""})}}}get ChangePasswordErrorText(){return this.currentPasswordInvalid?"Invalid current password.":null}get showChangePassword(){const{isResettingPassword:e}=this;return!e}get showPasswordResetSuccess(){const{isResettingPassword:e}=this;return e}},m.displayName=e.displayName||e.name,r=P,s=(0,n.default)(r.prototype,"isPasswordValid",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=(0,n.default)(r.prototype,"currentPasswordInvalid",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,n.default)(r.prototype,"verificationFormField",[g.computed],Object.getOwnPropertyDescriptor(r.prototype,"verificationFormField"),r.prototype),(0,n.default)(r.prototype,"FormSpecs",[a],Object.getOwnPropertyDescriptor(r.prototype,"FormSpecs"),r.prototype),(0,n.default)(r.prototype,"ChangePasswordErrorText",[g.computed],Object.getOwnPropertyDescriptor(r.prototype,"ChangePasswordErrorText"),r.prototype),(0,n.default)(r.prototype,"showChangePassword",[g.computed],Object.getOwnPropertyDescriptor(r.prototype,"showChangePassword"),r.prototype),(0,n.default)(r.prototype,"showPasswordResetSuccess",[g.computed],Object.getOwnPropertyDescriptor(r.prototype,"showPasswordResetSuccess"),r.prototype),h=(0,n.default)(r.prototype,"HandleChangePassword",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.isResettingPassword=!1}}}),y=(0,n.default)(r.prototype,"HandleFormChanged",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var a=(0,o.coroutine)((function*(a){e.password=a.values.password,e.currentPassword=a.values.currentPassword,e.isPasswordValid=!!a.isValid,e.invalidateSessions=a.values.invalidateSessions,e.currentPasswordInvalid=!1}));return function(e){return a.apply(this,arguments)}}()}}),b=(0,n.default)(r.prototype,"OnError",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var a;const t=null==e?void 0:null===(a=e.message)||void 0===a?void 0:a.toLowerCase();(null==t?void 0:t.includes("invalid password"))&&(this.currentPasswordInvalid=!0),null!=t&&t.includes("no close overlay")||this.statusContext.displayError({message:e.message})}}}),t=r))||t};var o=s(t(14)),d=r(t(12)),n=r(t(3)),i=(r(t(13)),r(t(35))),l=r(t(42)),u=r(t(39)),c=r(t(199)),f=r(t(68)),p=r(t(50)),g=t(2)},9773:function(e,a,t){var r=t(7),s=t(9774);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var o,d=0,n={injectType:"lazyStyleTag",insert:"head",singleton:!1},i={};s.locals&&(i.locals=s.locals),i.use=function(e){return d++||(o=r(s,{...n,...e})),i},i.unuse=function(){d>0&&!--d&&(o(),o=null)},e.exports=i},9774:function(e,a,t){(a=t(8)(!1)).push([e.i,".ChangePasswordOverlay-container{display:flex;flex-direction:column;flex:0 1 auto;align-items:center;min-height:60px}.ChangePasswordOverlay-form{margin-top:28px;width:300px}.ChangePasswordOverlay-check-mark{height:28px;width:28px;padding:4px;fill:#53da33;display:flex;align-items:center;flex-shrink:0;border:3px solid #53da33;border-radius:50%;height:32px;width:32px;margin-bottom:20px;margin-top:18px}.ChangePasswordOverlay-confirm-cancel{margin-top:42px}.ChangePasswordOverlay-mungedEmail{margin-top:12px;align-self:start}",""]),a.locals={confirmationGreen:"#53da33",confirmationGreenDesaturated:"#6cba50",gilded4:"#ecb200",gilded5:"#e0a900",gilded6:"#be8c00",errorRedDesaturated:"#df5353",gray:"#a3a3ac",bodyTextWhite:"#ececee",bodyTextWiteMask64:"rgba(236,236,238,.64)",border:"#848a94",errorRed:"#ff6b6b",warnYellow:"#ffb400",nuxBlue:"#008ae1",calendarOrange:"#d89332",calendarBlue:"#355bf8",calendarGreen:"#6cba50",calendarSeagreen:"#30a68f",calendarJewelgreen:"#148f33",calendarPurple:"#a250e8",calendarPurpleMask7:"rgba(162,80,232,.07)",calendarPurpleMask10:"rgba(162,80,232,.1)",mediumPurple3:"#dab9f6",mediumPurple3Mask10:"rgba(218,185,246,.1)",dropmenuGray:"#4f515d",menuGray:"#4f515d",menuGrayMask30:"rgba(79,81,93,.3)",yellowHighlight:"#ffeca0",desaturatedReddit:"#ea794f",desaturatedTwitter:"#64a9d4",desaturatedYoutube:"#cf5c58",whatsapp:"#25d366",github:"#24292e",vimeo:"#1ab7ea",gilded:"#f5c400",orangeRed:"#ff4500",gameNavBlack:"#32343d",gameNavBlackMask36:"rgba(50,52,61,.36)",white:"#fff",gilded2:"#f8d64c",gilded2Mask5:"rgba(248,214,76,.05)",gilded2Mask7:"rgba(248,214,76,.07)",gilded2Mask10:"rgba(248,214,76,.1)",gilded2Mask20:"rgba(248,214,76,.2)",gilded2Mask50:"rgba(248,214,76,.5)",nuxBlueDesaturatedMask7:"rgba(174,189,252,.07)",restGet:"#335a9e",restHead:"#a250e8",restPost:"#6cba50",restPut:"#d89332",restPatch:"#4f515d",restDelete:"#ff6b6b",mysteriousGray:"#212329",backgroundBlack:"#1e2025",yellowThree:"#ffb400",calendarGreenDesaturated:"#476047",calendarRed:"#df5353",calendarRedMask30:"rgba(223,83,83,.2)",calendarRedDesaturated:"#694148",druidOrange:"#e4b370",sidebarBlack:"#292b32",brandyPunch:"#d89332",navBlack:"#191b1f",yellow1:"gold",yellow2:"#e4c519",yellow3:"#ffb400",yellow4:"#ffb400",yellow5:"#d89f0c",yellow6:"#ffd800",yellow6Mask35:"rgba(255,216,0,.35)",gameNavGray:"#30323a",skeletonGray:"#50525f",blackPearl:"#222329",twitch:"#9146ff",bnet:"#078ad2",psn:"#00134c",xbox:"#1c6d00",steam:"#231f20",origin:"#e73b00",youtube:"red",twitter:"#1189f4",facebook:"#335a9e",switch:"#e60012",patreon:"#ff424d",roblox:"#00a2ff",epic:"#2f2d2e",bnetSecondary:"#009ae4",psnSecondary:"#2d64e6",xboxSecondary:"#52b043",steamSecondary:"#096295",twitchSecondary:"#9146ff",epicSecondary:"#0078f2",grayMask20:"rgba(163,163,172,.2)",grayMask40:"rgba(163,163,172,.4)",goldenShadow:"rgba(255,234,0,.5)",colorChannelGray:"#373943",streamGradient:"linear-gradient(63.5deg, #ff0000 -29.74%, #b258ff 83.36%)"},e.exports=a}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/ChangePasswordOverlay.js.map