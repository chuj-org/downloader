(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{1702:function(e,a,t){"use strict";var r=t(0);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(t(15)),i=r(t(6)),d=r(t(12)),n=r(t(3)),l=(r(t(13)),r(t(23))),s=r(t(385)),c=r(t(109)),p=r(t(37)),u=r(t(38)),f=r(t(71)),g=r(t(22)),b=r(t(1)),m=r(t(271)),y=r(t(11)),h=t(2),w=t(4),v=r(t(1491));t(9014),t(9016);var k,x,M,U=r(t(9018)),I=r(t(9019));function P(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function z(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?P(Object(t),!0).forEach((function(a){(0,o.default)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}U.default.autoDiscover=!1;const G={paramName:"file",maxFilesize:105,maxFiles:1,acceptedFiles:"image/*,video/*"};let S=(0,g.default)(k=(0,p.default)(k=(0,w.observer)((x=class extends b.default.Component{constructor(){super(),(0,d.default)(this,"isUploading",M,this),this.reactions=[{dataFn:()=>this.isUploading,reaction:e=>{var a,t;return null===(a=(t=this.props).onUploading)||void 0===a?void 0:a.call(t,e)}}],this.state={},this.id=l.default.rstr(),this.dropzone=void 0}shouldComponentUpdate(e,a){return(0,m.default)(this,e,a)}get isLoading(){return this.props.isLoading||this.isUploading}render(){const{imageDisplayName:e,centerIndicator:a,indicatorSize:t="lg",loaderPosition:r,hideIndicator:o,className:d,onGetImageUploaderRef:n,imageStyle:l}=this.props,{isLoading:s}=this,{progress:p=0,hasUploadedFile:u}=this.state;return(0,i.default)("div",{className:(0,y.default)("ImageUploader-container","needsclick",{"ImageUploader-container-uploading":s},l&&"ImageUploader-container-image-style-".concat(l),d)},void 0,s&&(0,i.default)("span",{className:(0,y.default)({"ImageUploader-loading-animation-wrapper":!0,"ImageUploader-loading-animation-top-right":"topRight"===r})},void 0,(0,i.default)(c.default,{})),s&&(0,i.default)("div",{className:(0,y.default)("ImageUploader-loader-bar",{"ImageUploader-loader-bar":u}),style:{width:"".concat(p,"%")}}),b.default.createElement("div",{className:(0,y.default)("dropzone","needsclick",{"ImageUploader-children":!0,"ImageUploader-children-loading":s}),id:this.id,ref:n}),!s&&(0,i.default)("div",{className:(0,y.default)({"ImageUploader-edit-indicator-wrapper":!0,"ImageUploader-edit-indicator-wrapper-center":a})},void 0,!o&&(0,i.default)(I.default,{displayName:e,size:t})))}componentDidMount(){const{EnsureRegistered:e}=this.userContext,{thumbnailWidth:a,thumbnailHeight:t,onUpload:r,onUploadStart:o,url:i,onError:d,maxFilesize:n,params:l}=this.props,c=()=>({directory:this.props.directory,fileName:this.props.fileName,dynamicMediaType:this.props.dynamicMediaType}),p=i;this.dztimeout=setTimeout(()=>{this.dropzone=new U.default("div#".concat(this.id),z(z({},G),{},{url:p,onUpload:r,thumbnailHeight:t,thumbnailWidth:a,params:l,maxFilesize:n||G.maxFilesize,accept:(a,t)=>{const{acceptsVideo:r}=this.props;e().then(e=>{if(!e)return t("Must be registered to upload images or video.");const i=a.type.startsWith("video"),d=s.default.GetExtension({filePathOrUrl:a.name}),n=v.default.GetFileValidationFriendlyErrorString({file:a,acceptsVideo:r});if(n)return t({customErrorTitle:"Error trying to upload",customErrorString:n});o&&o({isVideo:i,extension:d,file:a}),(0,h.runInAction)(()=>this.isUploading=!0),this.setState({isVideo:i,extension:d},()=>t())})},sending:function(e,a,t){const r=e.type.startsWith("video"),o=s.default.GetExtension({filePathOrUrl:e.name}),{directory:i,fileName:d,dynamicMediaType:n}=c();t.append("isVideo",r),t.append("extension",o),t.append("directory",i||""),t.append("fileName",d||""),n&&t.append("dynamicMediaTypeId",n.Id),a.withCredentials=!0},totaluploadprogress:e=>{const a=e>=100?100:e/100*80;this.setState({progress:a,hasUploadedFile:e>=100})},success:(e,a,t)=>{a.isVideo=this.state.isVideo,(0,h.runInAction)(()=>this.isUploading=!1),r&&r(a)},error:(e,a,t)=>{var r;null!==(r=a.startsWith)&&void 0!==r&&r.call(a,"Upload canceled")||(window.lastUploadError={file:e,errorMessage:a,jqXHR:t},(0,h.runInAction)(()=>this.isUploading=!1),this.dropzone.removeAllFiles(),d&&d({file:e,errorMessage:a,jqXHR:t}),u.default.emit(f.default.StatusMessage,{type:"error",message:"An error has occured"}))},init:()=>{}}))},700)}componentWillUnmount(){this.dropzone&&this.dropzone.destroy&&this.dropzone.destroy(),this.dztimeout&&clearTimeout(this.dztimeout)}},M=(0,n.default)(x.prototype,"isUploading",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,n.default)(x.prototype,"isLoading",[h.computed],Object.getOwnPropertyDescriptor(x.prototype,"isLoading"),x.prototype),k=x))||k)||k)||k;S.defaultProps={};var O=S;a.default=O},9014:function(e,a,t){var r=t(7),o=t(9015);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1},d=(r(o,i),o.locals?o.locals:{});e.exports=d},9015:function(e,a,t){(a=t(8)(!1)).push([e.i,"",""]),e.exports=a},9016:function(e,a,t){var r=t(7),o=t(9017);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i,d=0,n={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};o.locals&&(l.locals=o.locals),l.use=function(e){return d++||(i=r(o,{...n,...e})),l},l.unuse=function(){d>0&&!--d&&(i(),i=null)},e.exports=l},9017:function(e,a,t){(a=t(8)(!1)).push([e.i,".ImageUploader-container{width:100%;height:100%;opacity:0;cursor:pointer;transition:opacity 350ms ease-out;background-color:rgba(29,31,36,0);opacity:0;position:relative}@media only screen and (min-width: 770px){.ImageUploader-container:hover{transition-delay:600ms;opacity:1}}.ImageUploader-container.ImageUploader-container-uploading{opacity:1;background-color:rgba(29,31,36,.8)}.ImageUploader-edit-indicator-wrapper{position:absolute;top:5px;right:5px}.ImageUploader-loading-animation-top-right{position:absolute;top:20px;right:55px}.ImageUploader-container-image-style-rounded{border-radius:50%}.ImageUploader-edit-indicator-wrapper-center{left:0;right:0;margin:0 auto}.dropzone{padding:0 !important;width:100% !important;height:100% !important;border:none !important;min-height:0 !important;background:none !important}.dz-preview{display:none !important}.dz-image{display:none !important}.dz-image > img{background:none !important}.dz-error-message{display:none !important}.dz-size{display:none !important}.dz-message{display:none !important}.ImageUploader-loader-bar{height:10px;background-color:#f5c400;position:absolute;transition:width 700ms linear;transition-delay:700ms;top:0}.ImageUploader-loader-bar.ImageUploader-loader-bar{transition:width 14000ms linear}",""]),a.locals={confirmationGreen:"#53da33",confirmationGreenDesaturated:"#6cba50",gilded4:"#ecb200",gilded5:"#e0a900",gilded6:"#be8c00",errorRedDesaturated:"#df5353",gray:"#a3a3ac",bodyTextWhite:"#ececee",bodyTextWiteMask64:"rgba(236,236,238,.64)",border:"#848a94",errorRed:"#ff6b6b",warnYellow:"#ffb400",nuxBlue:"#008ae1",calendarOrange:"#d89332",calendarBlue:"#355bf8",calendarGreen:"#6cba50",calendarSeagreen:"#30a68f",calendarJewelgreen:"#148f33",calendarPurple:"#a250e8",calendarPurpleMask7:"rgba(162,80,232,.07)",calendarPurpleMask10:"rgba(162,80,232,.1)",mediumPurple3:"#dab9f6",mediumPurple3Mask10:"rgba(218,185,246,.1)",dropmenuGray:"#4f515d",menuGray:"#4f515d",menuGrayMask30:"rgba(79,81,93,.3)",yellowHighlight:"#ffeca0",desaturatedReddit:"#ea794f",desaturatedTwitter:"#64a9d4",desaturatedYoutube:"#cf5c58",whatsapp:"#25d366",github:"#24292e",vimeo:"#1ab7ea",gilded:"#f5c400",orangeRed:"#ff4500",gameNavBlack:"#32343d",gameNavBlackMask36:"rgba(50,52,61,.36)",white:"#fff",gilded2:"#f8d64c",gilded2Mask5:"rgba(248,214,76,.05)",gilded2Mask7:"rgba(248,214,76,.07)",gilded2Mask10:"rgba(248,214,76,.1)",gilded2Mask20:"rgba(248,214,76,.2)",gilded2Mask50:"rgba(248,214,76,.5)",nuxBlueDesaturatedMask7:"rgba(174,189,252,.07)",restGet:"#335a9e",restHead:"#a250e8",restPost:"#6cba50",restPut:"#d89332",restPatch:"#4f515d",restDelete:"#ff6b6b",mysteriousGray:"#212329",backgroundBlack:"#1e2025",yellowThree:"#ffb400",calendarGreenDesaturated:"#476047",calendarRed:"#df5353",calendarRedMask30:"rgba(223,83,83,.2)",calendarRedDesaturated:"#694148",druidOrange:"#e4b370",sidebarBlack:"#292b32",brandyPunch:"#d89332",navBlack:"#191b1f",yellow1:"gold",yellow2:"#e4c519",yellow3:"#ffb400",yellow4:"#ffb400",yellow5:"#d89f0c",yellow6:"#ffd800",yellow6Mask35:"rgba(255,216,0,.35)",gameNavGray:"#30323a",skeletonGray:"#50525f",blackPearl:"#222329",twitch:"#9146ff",bnet:"#078ad2",psn:"#00134c",xbox:"#1c6d00",steam:"#231f20",origin:"#e73b00",youtube:"red",twitter:"#1189f4",facebook:"#335a9e",switch:"#e60012",patreon:"#ff424d",roblox:"#00a2ff",epic:"#2f2d2e",bnetSecondary:"#009ae4",psnSecondary:"#2d64e6",xboxSecondary:"#52b043",steamSecondary:"#096295",twitchSecondary:"#9146ff",epicSecondary:"#0078f2",grayMask20:"rgba(163,163,172,.2)",grayMask40:"rgba(163,163,172,.4)",goldenShadow:"rgba(255,234,0,.5)",colorChannelGray:"#373943"},e.exports=a},9019:function(e,a,t){"use strict";var r=t(0);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,i,d=r(t(6)),n=r(t(21)),l=r(t(11)),s=r(t(1)),c=r(t(10)),p=(t(2),t(4));var u=(o=(0,c.default)({name:"EditIndicator",loader:()=>t(9020)}),(0,p.observer)(i=o(i=class extends s.default.Component{render(){const{displayName:e,size:a}=this.props;return(0,d.default)("div",{className:(0,l.default)({"EditIndicator-container":!0,"EditIndicator-container-small":"sm"===a})},void 0,(0,d.default)("div",{className:"EditIndicator-icon-wrapper"},void 0,(0,d.default)(n.default,{iconName:"icon-cloud-upload"})),"lg"===a&&(0,d.default)("div",{className:"EditIndicator-upload-text"},void 0,"Upload ",e))}})||i)||i);a.default=u},9020:function(e,a,t){var r=t(7),o=t(9021);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i,d=0,n={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};o.locals&&(l.locals=o.locals),l.use=function(e){return d++||(i=r(o,{...n,...e})),l},l.unuse=function(){d>0&&!--d&&(i(),i=null)},e.exports=l},9021:function(e,a,t){(a=t(8)(!1)).push([e.i,".EditIndicator-container{background-color:rgba(0,0,0,.7);fill:#b9bbbd;color:#b9bbbd;display:inline-block;padding:10px 20px;border-radius:7px;pointer-events:none}.EditIndicator-container-small{padding:5px 5px}.EditIndicator-icon-wrapper,.EditIndicator-upload-text{display:inline-block;height:24px;float:left}.EditIndicator-icon-wrapper{width:24px}.EditIndicator-upload-text{margin-left:15px;font-weight:700;font-size:16px;line-height:26px;margin-left:10px}",""]),a.locals={confirmationGreen:"#53da33",confirmationGreenDesaturated:"#6cba50",gilded4:"#ecb200",gilded5:"#e0a900",gilded6:"#be8c00",errorRedDesaturated:"#df5353",gray:"#a3a3ac",bodyTextWhite:"#ececee",bodyTextWiteMask64:"rgba(236,236,238,.64)",border:"#848a94",errorRed:"#ff6b6b",warnYellow:"#ffb400",nuxBlue:"#008ae1",calendarOrange:"#d89332",calendarBlue:"#355bf8",calendarGreen:"#6cba50",calendarSeagreen:"#30a68f",calendarJewelgreen:"#148f33",calendarPurple:"#a250e8",calendarPurpleMask7:"rgba(162,80,232,.07)",calendarPurpleMask10:"rgba(162,80,232,.1)",mediumPurple3:"#dab9f6",mediumPurple3Mask10:"rgba(218,185,246,.1)",dropmenuGray:"#4f515d",menuGray:"#4f515d",menuGrayMask30:"rgba(79,81,93,.3)",yellowHighlight:"#ffeca0",desaturatedReddit:"#ea794f",desaturatedTwitter:"#64a9d4",desaturatedYoutube:"#cf5c58",whatsapp:"#25d366",github:"#24292e",vimeo:"#1ab7ea",gilded:"#f5c400",orangeRed:"#ff4500",gameNavBlack:"#32343d",gameNavBlackMask36:"rgba(50,52,61,.36)",white:"#fff",gilded2:"#f8d64c",gilded2Mask5:"rgba(248,214,76,.05)",gilded2Mask7:"rgba(248,214,76,.07)",gilded2Mask10:"rgba(248,214,76,.1)",gilded2Mask20:"rgba(248,214,76,.2)",gilded2Mask50:"rgba(248,214,76,.5)",nuxBlueDesaturatedMask7:"rgba(174,189,252,.07)",restGet:"#335a9e",restHead:"#a250e8",restPost:"#6cba50",restPut:"#d89332",restPatch:"#4f515d",restDelete:"#ff6b6b",mysteriousGray:"#212329",backgroundBlack:"#1e2025",yellowThree:"#ffb400",calendarGreenDesaturated:"#476047",calendarRed:"#df5353",calendarRedMask30:"rgba(223,83,83,.2)",calendarRedDesaturated:"#694148",druidOrange:"#e4b370",sidebarBlack:"#292b32",brandyPunch:"#d89332",navBlack:"#191b1f",yellow1:"gold",yellow2:"#e4c519",yellow3:"#ffb400",yellow4:"#ffb400",yellow5:"#d89f0c",yellow6:"#ffd800",yellow6Mask35:"rgba(255,216,0,.35)",gameNavGray:"#30323a",skeletonGray:"#50525f",blackPearl:"#222329",twitch:"#9146ff",bnet:"#078ad2",psn:"#00134c",xbox:"#1c6d00",steam:"#231f20",origin:"#e73b00",youtube:"red",twitter:"#1189f4",facebook:"#335a9e",switch:"#e60012",patreon:"#ff424d",roblox:"#00a2ff",epic:"#2f2d2e",bnetSecondary:"#009ae4",psnSecondary:"#2d64e6",xboxSecondary:"#52b043",steamSecondary:"#096295",twitchSecondary:"#9146ff",epicSecondary:"#0078f2",grayMask20:"rgba(163,163,172,.2)",grayMask40:"rgba(163,163,172,.4)",goldenShadow:"rgba(255,234,0,.5)",colorChannelGray:"#373943"},e.exports=a}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/ImageUploader.js.map