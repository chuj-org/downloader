(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{4674:function(e,a,t){"use strict";var l=t(0);t(9),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r,o,n,i,s,d=l(t(6)),c=l(t(20)),u=t(14),f=l(t(12)),p=l(t(3)),m=(l(t(13)),l(t(1010))),g=l(t(18)),y=l(t(377)),h=l(t(233)),b=l(t(41)),C=l(t(71)),x=l(t(38)),v=l(t(22)),w=l(t(42)),k=l(t(35)),O=l(t(204)),A=l(t(39)),S=l(t(953)),M=l(t(50)),N=l(t(199)),P=l(t(68)),I=l(t(740)),B=l(t(1694)),G=l(t(11)),T=l(t(1)),U=t(2),D=t(4);var _=(0,l(t(10)).default)({name:"ClaimAccountOverlay",loader:()=>t(9704)})(r=(0,A.default)(r=(0,S.default)(r=(0,O.default)(r=(0,v.default)(r=(0,m.default)(r=(0,D.observer)((o=class extends T.default.Component{constructor(...e){var a;super(...e),a=this,this.IsUnstyled=!0,this.IsContentScrollable=!1,this.ClaimAccountsLogo={src:"/asset/Nux/claim-acc.png",srcSet:"/asset/Nux/claim-acc.png 1x, /asset/Nux/claim-acc@2x.png 2x, /asset/Nux/claim-acc@3x.png 3x"},this.SocialContextInfo={headerText:"Save your progress",description:"Keep the username you created by claiming your account."},this.UserCalloutBadges=[{text:"Unclaimed",color:h.default.menuGray}],(0,f.default)(this,"isClaimed",n,this),(0,f.default)(this,"formValue",i,this),this.Confirm=(0,u.coroutine)((function*(){})),this._handleClaimSuccess=({type:e})=>{const{onConfirm:a}=this.props;x.default.emit(C.default.StatusMessage,{text:"Account successfully claimed",type:"success"}),w.default.Log(k.default.ClaimAccountOverlayComplete,{type:e}),a&&a({success:!0})},this._handleClaimByEmail=function(){var e=(0,u.coroutine)((function*({values:{email:e,password:t}}){const{_handleClaimSuccess:l}=a,{userInfo:r}=a.userContext,{onConfirm:o}=a.props;try{yield a.makeRequest(M.default.UpdateUserProfile({userId:null==r?void 0:r.id,email:e,password:t})),(0,U.runInAction)(()=>{a.isClaimed=!0,r.updateUserInfo({email:e,isUnrecoverable:!1,needsRequiredAccountInfo:!1})}),l({type:"email"})}catch(e){x.default.emit(C.default.StatusMessage,{text:"An error has occurred while claiming the account",type:"error"}),w.default.Log(k.default.ClaimAccountOverlayError,{type:"email",error:e.toString(),errorObj:JSON.stringify(e)}),o&&o({success:!1})}}));return function(a){return e.apply(this,arguments)}}(),(0,f.default)(this,"_handleChange",s,this)}get hasUnsavedChanges(){var e;return!!(null===(e=this.formValue)||void 0===e?void 0:e.hasChanged)}get formSpecs(){const{userInfo:e}=this.userContext;return{sections:[{fieldSpecs:[!(null==e?void 0:e.email)&&{type:P.default.Text,fieldName:"email",label:"Email",inputType:"email",validationFunction:N.default.ValidateEmailDoesntExist},{type:P.default.Text,fieldName:"password",label:"Password",inputType:"password",validationFunction:N.default.ValidateNewPassword}].filter(Boolean)}]}}render(){const{userInfo:e}=this.userContext,{className:a}=this.props;return(0,d.default)("div",{className:(0,G.default)("ClaimAccountOverlay-container",g.default.IsDesktop&&"ClaimAccountOverlay-container-desktop",a)},void 0,T.default.createElement(b.default,(0,c.default)({},this.ClaimAccountsLogo,{className:"ClaimAccountOverlay-logo"})),(0,d.default)(B.default,{socialContextInfo:this.SocialContextInfo,isWide:g.default.IsDesktop}),(0,d.default)(y.default,{user:e,className:"ClaimAccountOverlay-user",imageClassName:"ClaimAccountOverlay-user-image",calloutBadgeInfos:this.UserCalloutBadges,disableProfileCard:!0,hideUserStatusIcon:!0}),!this.isClaimed&&(0,d.default)("div",{className:"ClaimAccountOverlay-signup-control ClaimAccountOverlay-signup-control-email"},void 0,(0,d.default)(I.default,{className:"ClaimAccountOverlay-form",formSpecs:this.formSpecs,hideCancel:!0,autofocus:!0,isLoading:this.isMakingRequest,onConfirm:this._handleClaimByEmail,onChange:this._handleChange,confirmText:"Continue",isConfirmWide:!0})))}},n=(0,p.default)(o.prototype,"isClaimed",[U.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=(0,p.default)(o.prototype,"formValue",[U.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),(0,p.default)(o.prototype,"hasUnsavedChanges",[U.computed],Object.getOwnPropertyDescriptor(o.prototype,"hasUnsavedChanges"),o.prototype),s=(0,p.default)(o.prototype,"_handleChange",[U.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.formValue=e}}}),(0,p.default)(o.prototype,"formSpecs",[U.computed],Object.getOwnPropertyDescriptor(o.prototype,"formSpecs"),o.prototype),r=o))||r)||r)||r)||r)||r)||r)||r;a.default=_},9704:function(e,a,t){var l=t(7),r=t(9705);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o,n=0,i={injectType:"lazyStyleTag",insert:"head",singleton:!1},s={};r.locals&&(s.locals=r.locals),s.use=function(e){return n++||(o=l(r,{...i,...e})),s},s.unuse=function(){n>0&&!--n&&(o(),o=null)},e.exports=s},9705:function(e,a,t){(a=t(8)(!1)).push([e.i,".ClaimAccountOverlay-container{padding-top:32px;height:100%;display:flex;flex-direction:column}.ClaimAccountOverlay-signup-control{margin:32px 0;display:flex;flex-direction:column;flex:1 0 auto;width:100%;align-content:center;align-items:center;justify-content:center}.ClaimAccountOverlay-signup-control-email{margin-top:14px}.ClaimAccountOverlay-divider{font-size:14px;height:1px;margin:0 20px}.ClaimAccountOverlay-logo{height:140px;margin-bottom:24px;align-self:center}.ClaimAccountOverlay-container-desktop{padding-top:0}.ClaimAccountOverlay-container-desktop .ClaimAccountOverlay-logo{margin-top:-45px}.ClaimAccountOverlay-user{display:flex;flex-direction:row;padding:12px;margin-top:24px;background-color:#30323a;align-self:center;width:300px;border-radius:4px}.ClaimAccountOverlay-user-image{width:40px;height:40px}",""]),a.locals={confirmationGreen:"#53da33",confirmationGreenDesaturated:"#6cba50",gilded4:"#ecb200",gilded5:"#e0a900",gilded6:"#be8c00",errorRedDesaturated:"#df5353",gray:"#a3a3ac",bodyTextWhite:"#ececee",bodyTextWiteMask64:"rgba(236,236,238,.64)",border:"#848a94",errorRed:"#ff6b6b",warnYellow:"#ffb400",nuxBlue:"#008ae1",calendarOrange:"#d89332",calendarBlue:"#355bf8",calendarGreen:"#6cba50",calendarSeagreen:"#30a68f",calendarJewelgreen:"#148f33",calendarPurple:"#a250e8",calendarPurpleMask7:"rgba(162,80,232,.07)",calendarPurpleMask10:"rgba(162,80,232,.1)",mediumPurple3:"#dab9f6",mediumPurple3Mask10:"rgba(218,185,246,.1)",dropmenuGray:"#4f515d",menuGray:"#4f515d",menuGrayMask30:"rgba(79,81,93,.3)",yellowHighlight:"#ffeca0",desaturatedReddit:"#ea794f",desaturatedTwitter:"#64a9d4",desaturatedYoutube:"#cf5c58",whatsapp:"#25d366",github:"#24292e",vimeo:"#1ab7ea",gilded:"#f5c400",orangeRed:"#ff4500",gameNavBlack:"#32343d",gameNavBlackMask36:"rgba(50,52,61,.36)",white:"#fff",gilded2:"#f8d64c",gilded2Mask5:"rgba(248,214,76,.05)",gilded2Mask7:"rgba(248,214,76,.07)",gilded2Mask10:"rgba(248,214,76,.1)",gilded2Mask20:"rgba(248,214,76,.2)",gilded2Mask50:"rgba(248,214,76,.5)",nuxBlueDesaturatedMask7:"rgba(174,189,252,.07)",restGet:"#335a9e",restHead:"#a250e8",restPost:"#6cba50",restPut:"#d89332",restPatch:"#4f515d",restDelete:"#ff6b6b",mysteriousGray:"#212329",backgroundBlack:"#1e2025",yellowThree:"#ffb400",calendarGreenDesaturated:"#476047",calendarRed:"#df5353",calendarRedMask30:"rgba(223,83,83,.2)",calendarRedDesaturated:"#694148",druidOrange:"#e4b370",sidebarBlack:"#292b32",brandyPunch:"#d89332",navBlack:"#191b1f",yellow1:"gold",yellow2:"#e4c519",yellow3:"#ffb400",yellow4:"#ffb400",yellow5:"#d89f0c",yellow6:"#ffd800",yellow6Mask35:"rgba(255,216,0,.35)",gameNavGray:"#30323a",skeletonGray:"#50525f",blackPearl:"#222329",twitch:"#9146ff",bnet:"#078ad2",psn:"#00134c",xbox:"#1c6d00",steam:"#231f20",origin:"#e73b00",youtube:"red",twitter:"#1189f4",facebook:"#335a9e",switch:"#e60012",patreon:"#ff424d",roblox:"#00a2ff",epic:"#2f2d2e",bnetSecondary:"#009ae4",psnSecondary:"#2d64e6",xboxSecondary:"#52b043",steamSecondary:"#096295",twitchSecondary:"#9146ff",epicSecondary:"#0078f2",grayMask20:"rgba(163,163,172,.2)",grayMask40:"rgba(163,163,172,.4)",goldenShadow:"rgba(255,234,0,.5)",colorChannelGray:"#373943"},e.exports=a}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/ClaimAccountOverlay.js.map