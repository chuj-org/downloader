(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{4701:function(e,t,a){"use strict";var o=a(0);a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,d,l,i,s,u=o(a(6)),c=a(14),p=o(a(12)),f=o(a(3)),h=(o(a(13)),o(a(904))),b=o(a(39)),y=o(a(148)),g=o(a(7984)),m=o(a(35)),k=o(a(709)),w=o(a(103)),v=o(a(25)),I=o(a(8017)),O=o(a(345)),x=o(a(273)),M=o(a(199)),W=o(a(155)),D=o(a(1616)),U=o(a(114)),R=o(a(68)),T=o(a(204)),C=o(a(11)),P=o(a(1)),S=a(2),j=a(4);var G=(n=(0,o(a(10)).default)({name:"ManageWebhookOverlay",loader:()=>a(9870)}),r=S.computed.struct,n(d=(0,b.default)(d=(0,g.default)(d=(0,v.default)(d=(0,W.default)(d=(0,T.default)(d=(0,j.observer)((l=class extends P.default.Component{constructor(...e){var t;super(...e),t=this,this.IsUnstyled=!0,this.BorderStyle="round",this.ControlConfiguration=x.default.ConfirmAndCancel,(0,p.default)(this,"formValue",i,this),(0,p.default)(this,"_handleChange",s,this),this.Confirm=(0,c.coroutine)((function*(){const{webhook:e,isUpdate:a=!1}=t.props,{teamInfo:o}=t.teamContext,{formValue:n}=t;n.values.iconUrl===O.default.TarobiBotUser.profilePicture&&delete n.values.iconUrl;const{iconUrl:r,channelId:{value:d},name:l}=n.values,i=yield t.makeRequest(I.default.UpdateWebhook({webhookId:e.id,iconUrl:r,channelId:d,name:l}));a?o.updateWebhook({webhook:i}):o.createWebhook({webhook:i})}))}get Disabled(){var e;return!(null===(e=this.formValue)||void 0===e?void 0:e.isValid)}get ConfirmText(){const{isUpdate:e=!1}=this.props;return e?"Update":"Create"}get Header(){const{ConfirmText:e}=this;return"".concat(e," webhook")}get webhookUrl(){const{webhook:e}=this.props;return e.token?k.default.GetWebhookUrl(e):null}get channelOptions(){const{groupWebhookSupportedChannels:e}=this.teamChannelsContext;return e.map(({id:e,name:t,iconName:a})=>({label:t,iconName:a,value:e}))}get defaultDropdownValue(){const{channelOptions:e}=this,{webhook:t}=this.props;return e.find(({value:e})=>e===t.channelId)}get formSpecs(){const{channelOptions:e,defaultDropdownValue:t}=this,{webhook:a}=this.props;return{sections:[{fieldSpecs:[{type:R.default.Text,fieldName:"name",label:"Name",isOptional:!1,defaultValue:a.name,validationFunction:M.default.ValidateWebhookName,constrainWidth:!0},{type:R.default.Dropdown,label:"Channel",fieldName:"channelId",grow:1,defaultValue:t,options:e,useFuzzySort:!0,optionSubLabelRenderer:this._handleRenderGroupAvatar}]},{className:"ManageWebhookOverlay-form-section-image",fieldSpecs:[{type:R.default.Image,fieldName:"iconUrl",label:"Webhook icon",aspectRatio:1,maxWidth:80,minWidth:80,instructions:"We recommend a square image at least 80x80px.",buttonLabel:"Upload icon",isOptional:!0,defaultValue:a.profilePicture,imageStyle:"rounded",imageInputLabelClassName:"ManageWebhookOverlay-image-input-label",showColoredUploadButton:!0,friendlyUploadName:"webhook icon",dynamicMediaTypeId:w.default.UserAvatar.Id,displayFormat:w.default.UserAvatar.OutputFormats.Medium.Name,fileDragDropEnabled:!0}]}]}}fetchData(){var e=this;return(0,c.coroutine)((function*(){const{webhook:t}=e.props,{teamId:a}=e.teamContext;return t.token?{}:h.default.GetWebhookDetailByWebhookId({teamId:a,webhookIds:[t.id]})}))()}handleDataFetch(e){const{webhook:t}=this.props,a=e[this.props.webhook.id];a&&t.update(a)}render(){const{className:e}=this.props,{formSpecs:t,_handleChange:a,webhookUrl:o}=this;return(0,u.default)("div",{className:(0,C.default)("ManageWebhookOverlay-container",e)},void 0,(0,u.default)(U.default,{onChange:a,formSpecs:t}),(0,u.default)(y.default,{className:"ManageWebhookOverlay-copy-url-container",loadedSignal:o,networkError:this.networkError,onRefresh:this.refetch},void 0,(0,u.default)(D.default,{className:"ManageWebhookOverlay-copy-url",instructions:"Webhook URL",clipboardLogEvent:m.default.WebhookUrlCopied,instructionsAlignment:"left",hideShareButtons:!0,layout:"compact",text:o,type:"text"})))}},i=(0,f.default)(l.prototype,"formValue",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),(0,f.default)(l.prototype,"Disabled",[S.computed],Object.getOwnPropertyDescriptor(l.prototype,"Disabled"),l.prototype),(0,f.default)(l.prototype,"ConfirmText",[S.computed],Object.getOwnPropertyDescriptor(l.prototype,"ConfirmText"),l.prototype),(0,f.default)(l.prototype,"Header",[S.computed],Object.getOwnPropertyDescriptor(l.prototype,"Header"),l.prototype),(0,f.default)(l.prototype,"webhookUrl",[S.computed],Object.getOwnPropertyDescriptor(l.prototype,"webhookUrl"),l.prototype),(0,f.default)(l.prototype,"channelOptions",[r],Object.getOwnPropertyDescriptor(l.prototype,"channelOptions"),l.prototype),(0,f.default)(l.prototype,"defaultDropdownValue",[S.computed],Object.getOwnPropertyDescriptor(l.prototype,"defaultDropdownValue"),l.prototype),(0,f.default)(l.prototype,"formSpecs",[S.computed],Object.getOwnPropertyDescriptor(l.prototype,"formSpecs"),l.prototype),s=(0,f.default)(l.prototype,"_handleChange",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.formValue=e}}),(0,f.default)(l.prototype,"handleDataFetch",[S.action],Object.getOwnPropertyDescriptor(l.prototype,"handleDataFetch"),l.prototype),d=l))||d)||d)||d)||d)||d)||d)||d);t.default=G},7984:function(e,t,a){"use strict";var o=a(0);a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,o;return(0,l.default)(t=(0,d.default)(t=(0,r.default)((o=a=class extends e{constructor(...e){super(...e),this._handleRenderGroupAvatar=e=>{const t=e.value,a=this.teamChannelsContext.channelsById[t]||this.chatContext.temporalChannelsById[t],{groupsById:o}=this.teamContext,r=o[null==a?void 0:a.groupId];return r&&(0,n.default)(i.default,{group:r,size:s.default.IsNative?16:"xs"})}}},a.displayName=e.displayName||e.name,t=o))||t)||t)||t};var n=o(a(6)),r=o(a(158)),d=o(a(155)),l=o(a(25)),i=o(a(314)),s=(o(a(1)),a(2),o(a(18)))},8017:function(e,t,a){"use strict";var o=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(14),r=o(a(690)),d=o(a(8018)),l=o(a(17));t.default=class{static CreateWebhook({channelId:e,name:t}){return(0,n.coroutine)((function*(){(0,l.default)("string"==typeof e,"channelId must be a string"),(0,l.default)("string"==typeof t,"name must be a string");const a=yield d.default.createWebhook({channelId:e,name:t});return new r.default(a)}))()}static UpdateWebhook({webhookId:e,name:t,iconUrl:a,channelId:o}){return(0,n.coroutine)((function*(){(0,l.default)("string"==typeof e,"webhookId must be a string"),(0,l.default)("string"==typeof t,"name must be a string");const n=yield d.default.updateWebhook({webhookId:e,name:t,iconUrl:a,channelId:o});return new r.default(n)}))()}static DeleteWebhook({webhookId:e}){return(0,n.coroutine)((function*(){return(0,l.default)("string"==typeof e,"webhookId must be a string"),d.default.deleteWebhook({webhookId:e})}))()}static CreateMessage({webhookId:e,token:t,payload:a,githubEventType:o,githubDeliveryId:r}){return(0,n.coroutine)((function*(){return(0,l.default)("string"==typeof e,"webhookId must be a string"),(0,l.default)("string"==typeof t,"token must be a string"),(0,l.default)(a,"payload is required"),(0,l.default)(r,"githubDeliveryId is required"),d.default.createMessage({webhookId:e,token:t,payload:a,githubEventType:o,githubDeliveryId:r})}))()}static AddReaction({webhookId:e,token:t,messageId:a,customReactionId:o}){return(0,n.coroutine)((function*(){return(0,l.default)("string"==typeof e,"webhookId must be a string"),(0,l.default)("string"==typeof t,"token must be a string"),(0,l.default)(a,"messageId is required"),(0,l.default)(o,"customReactionId is required"),d.default.addReaction({webhookId:e,token:t,messageId:a,customReactionId:o})}))()}static RemoveReaction({webhookId:e,token:t,messageId:a,customReactionId:o}){return(0,n.coroutine)((function*(){return(0,l.default)("string"==typeof e,"webhookId must be a string"),(0,l.default)("string"==typeof t,"token must be a string"),(0,l.default)(a,"messageId is required"),(0,l.default)(o,"customReactionId is required"),d.default.removeReaction({webhookId:e,token:t,messageId:a,customReactionId:o})}))()}}},8018:function(e,t,a){"use strict";var o=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(a(14));var n=o(a(73)),r=a(152);const d={withCredentials:!o(a(18)).default.IsGuildedTwitchExtension};var l={createWebhook:({channelId:e,name:t})=>(0,r.GuildedRequest)({xhrFields:d,url:"".concat(n.default.BaseUrl,"/webhooks"),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({name:t,channelId:e})}),updateWebhook:({channelId:e,webhookId:t,name:a,iconUrl:o})=>(0,r.GuildedRequest)({xhrFields:d,url:"".concat(n.default.BaseUrl,"/webhooks/").concat(t),type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify({name:a,iconUrl:o,channelId:e})}),deleteWebhook:({webhookId:e})=>(0,r.GuildedRequest)({xhrFields:d,url:"".concat(n.default.BaseUrl,"/webhooks/").concat(e),type:"DELETE",contentType:"application/json",dataType:"json"}),createMessage:({webhookId:e,token:t,payload:a,githubEventType:o,githubDeliveryId:l})=>{const i={};return o&&(i["X-GitHub-Event"]=o),l&&(i["X-GitHub-Delivery"]=l),(0,r.GuildedRequest)({xhrFields:d,headers:i,url:"".concat(n.default.BaseMediaUrl,"/webhooks/").concat(e,"/").concat(t),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(a)})},addReaction:({webhookId:e,token:t,messageId:a,customReactionId:o})=>(0,r.GuildedRequest)({xhrFields:d,url:"".concat(n.default.BaseMediaUrl,"/webhooks/").concat(e,"/").concat(t,"/").concat(a,"/").concat(o),type:"PUT",contentType:"application/json",dataType:"json"}),removeReaction:({webhookId:e,token:t,messageId:a,customReactionId:o})=>(0,r.GuildedRequest)({xhrFields:d,url:"".concat(n.default.BaseMediaUrl,"/webhooks/").concat(e,"/").concat(t,"/").concat(a,"/").concat(o),type:"DELETE",contentType:"application/json",dataType:"json"})};t.default=l},9870:function(e,t,a){var o=a(7),n=a(9871);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var r,d=0,l={injectType:"lazyStyleTag",insert:"head",singleton:!1},i={};n.locals&&(i.locals=n.locals),i.use=function(e){return d++||(r=o(n,{...l,...e})),i},i.unuse=function(){d>0&&!--d&&(r(),r=null)},e.exports=i},9871:function(e,t,a){(t=a(8)(!1)).push([e.i,".ManageWebhookOverlay-container{color:#fff;display:flex;flex-direction:column;padding:24px;max-width:520px}.ManageWebhookOverlay-container .ManageWebhookOverlay-copy-url-instructions,.ManageWebhookOverlay-container .ManageWebhookOverlay-image-input-label{color:#a3a3ac;font-size:14px;line-height:145%;font-weight:700}.ManageWebhookOverlay-container .ManageWebhookOverlay-image-input-label{margin-bottom:12px}.ManageWebhookOverlay-container .ManageWebhookOverlay-form-section-image,.ManageWebhookOverlay-container .ManageWebhookOverlay-copy-url-container{max-width:100%;padding-top:28px;border-top:1px solid rgba(161,163,174,.2);margin-top:28px !important}.ManageWebhookOverlay-container .ManageWebhookOverlay-copy-url{width:100%}",""]),t.locals={confirmationGreen:"#53da33",confirmationGreenDesaturated:"#6cba50",gilded4:"#ecb200",gilded5:"#e0a900",gilded6:"#be8c00",errorRedDesaturated:"#df5353",gray:"#a3a3ac",bodyTextWhite:"#ececee",bodyTextWiteMask64:"rgba(236,236,238,.64)",border:"#848a94",errorRed:"#ff6b6b",warnYellow:"#ffb400",nuxBlue:"#008ae1",calendarOrange:"#d89332",calendarBlue:"#355bf8",calendarGreen:"#6cba50",calendarSeagreen:"#30a68f",calendarJewelgreen:"#148f33",calendarPurple:"#a250e8",calendarPurpleMask7:"rgba(162,80,232,.07)",calendarPurpleMask10:"rgba(162,80,232,.1)",mediumPurple3:"#dab9f6",mediumPurple3Mask10:"rgba(218,185,246,.1)",dropmenuGray:"#4f515d",menuGray:"#4f515d",menuGrayMask30:"rgba(79,81,93,.3)",yellowHighlight:"#ffeca0",desaturatedReddit:"#ea794f",desaturatedTwitter:"#64a9d4",desaturatedYoutube:"#cf5c58",whatsapp:"#25d366",github:"#24292e",vimeo:"#1ab7ea",gilded:"#f5c400",orangeRed:"#ff4500",gameNavBlack:"#32343d",gameNavBlackMask36:"rgba(50,52,61,.36)",white:"#fff",gilded2:"#f8d64c",gilded2Mask5:"rgba(248,214,76,.05)",gilded2Mask7:"rgba(248,214,76,.07)",gilded2Mask10:"rgba(248,214,76,.1)",gilded2Mask20:"rgba(248,214,76,.2)",gilded2Mask50:"rgba(248,214,76,.5)",nuxBlueDesaturatedMask7:"rgba(174,189,252,.07)",restGet:"#335a9e",restHead:"#a250e8",restPost:"#6cba50",restPut:"#d89332",restPatch:"#4f515d",restDelete:"#ff6b6b",mysteriousGray:"#212329",backgroundBlack:"#1e2025",yellowThree:"#ffb400",calendarGreenDesaturated:"#476047",calendarRed:"#df5353",calendarRedMask30:"rgba(223,83,83,.2)",calendarRedDesaturated:"#694148",druidOrange:"#e4b370",sidebarBlack:"#292b32",brandyPunch:"#d89332",navBlack:"#191b1f",yellow1:"gold",yellow2:"#e4c519",yellow3:"#ffb400",yellow4:"#ffb400",yellow5:"#d89f0c",yellow6:"#ffd800",yellow6Mask35:"rgba(255,216,0,.35)",gameNavGray:"#30323a",skeletonGray:"#50525f",blackPearl:"#222329",twitch:"#9146ff",bnet:"#078ad2",psn:"#00134c",xbox:"#1c6d00",steam:"#231f20",origin:"#e73b00",youtube:"red",twitter:"#1189f4",facebook:"#335a9e",switch:"#e60012",patreon:"#ff424d",roblox:"#00a2ff",epic:"#2f2d2e",bnetSecondary:"#009ae4",psnSecondary:"#2d64e6",xboxSecondary:"#52b043",steamSecondary:"#096295",twitchSecondary:"#9146ff",epicSecondary:"#0078f2",grayMask20:"rgba(163,163,172,.2)",grayMask40:"rgba(163,163,172,.4)",goldenShadow:"rgba(255,234,0,.5)",colorChannelGray:"#373943"},e.exports=t}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/ManageWebhookOverlay.js.map