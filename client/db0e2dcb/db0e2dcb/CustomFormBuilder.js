(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{4680:function(e,t,o){"use strict";var r=o(0);o(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a,l,s=r(o(6)),n=r(o(12)),d=r(o(3)),u=(r(o(13)),r(o(9738))),p=r(o(1636)),c=r(o(1682)),m=r(o(114)),f=r(o(711)),h=r(o(9739)),g=r(o(18)),b=r(o(68)),y=r(o(5162)),v=r(o(11)),w=r(o(1)),F=o(2),C=o(4);var P=(0,r(o(10)).default)({name:"CustomFormBuilder",loader:()=>o(9743)})(i=(0,p.default)(i=(0,u.default)(i=(0,C.observer)((a=class extends w.default.Component{constructor(...e){super(...e),(0,n.default)(this,"selectedToggleOption",l,this)}get isEditing(){return this.selectedToggleOption.value===this.EditOption.value}get isPreviewing(){return this.selectedToggleOption.value===this.PreviewOption.value}render(){const{customForm:e,isAlwaysPublic:t}=this.props,{isMakingRequest:o,formSpecs:r,FormType:i,selectedToggleOption:a,isEditing:l,isPoll:n,isForm:d,customFormPreview:u,toggleOptions:p}=this;return(0,s.default)("div",{className:(0,v.default)("CustomFormBuilder-container",g.default.IsDesktop&&"CustomFormBuilder-container-desktop",!l&&"CustomFormBuilder-container-previewing",this.isInsideAppWindow&&"CustomFormBuilder-container-compact","CustomFormBuilder-container-type-".concat(i))},void 0,p&&p.length>0&&(0,s.default)(f.default,{className:"CustomFormBuilder-edit-preview",selectedOption:a,options:p,onChange:this._handleEditPreviewChange}),(0,s.default)("div",{className:(0,v.default)(n&&"CustomFormBuilder-details-container-v2")},void 0,(0,s.default)(h.default,{disableName:n,disableDescription:n,className:n?"CustomFormBuilder-details-form-v2":"CustomFormBuilder-details-form",customForm:e,onChange:this._handleDetailsFormChange,isAlwaysPublic:t,allowMultipleUserResponses:d,disableAllowMultipleUserResponses:!!e}),(0,s.default)(y.default,{className:"CustomFormBuilder-form-builder",defaultFieldType:b.default.Text,formSpecs:r,onChange:this._handleFormBuilderChanged,blockHeaderPrefix:"Question",addSectionSuffix:"question",disableAddSection:o||this.isFormMaxLength,hideAddSection:n||this.isFormMaxLength,disableExistingFieldTypes:!0,useTextArea:!0})),!l&&u&&w.default.createElement(w.default.Fragment,null,(0,s.default)(c.default,{readOnly:!0,customForm:u}),(0,s.default)(m.default,{className:"CustomFormBuilder-form-preview",formSpecs:u.formSpecs,isCustom:!0})),!l&&!u&&(0,s.default)("div",{className:"CustomFormBuilder-no-specs"},void 0,"No questions added yet"))}},l=(0,d.default)(a.prototype,"selectedToggleOption",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.EditOption}}),(0,d.default)(a.prototype,"isEditing",[F.computed],Object.getOwnPropertyDescriptor(a.prototype,"isEditing"),a.prototype),(0,d.default)(a.prototype,"isPreviewing",[F.computed],Object.getOwnPropertyDescriptor(a.prototype,"isPreviewing"),a.prototype),i=a))||i)||i)||i)||i;t.default=P},9738:function(e,t,o){"use strict";var r=o(0);o(36),o(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,o,r,i,y,w,F,C,P,O,x;return(0,g.default)(t=(0,b.default)(t=(0,h.default)((o=class extends e{constructor(...e){var t,o;super(...e),o=this,this.ControlConfiguration=d.default.ConfirmAndCancel,this.FormType=(null===(t=this.props.customForm)||void 0===t?void 0:t.type)||this.props.formType||n.default.Form,this.FormTypeName=c.default.TypeNames[this.FormType],this.Header=this.props.customForm?"Edit ".concat(this.FormTypeName):"Create a ".concat(this.FormTypeName),this.ConfirmText=this.props.customForm?"Update":"Create",this.EditOption={label:"Edit",value:"edit"},this.PreviewOption={label:"Preview",value:"preview"},(0,l.default)(this,"formSpecs",r,this),(0,l.default)(this,"isFormBuilderValid",i,this),(0,l.default)(this,"isDetailsValid",y,this),(0,l.default)(this,"hasDetailsChanged",w,this),(0,l.default)(this,"hasFormBuilderChanged",F,this),(0,l.default)(this,"detailValues",C,this),this.Confirm=(0,a.coroutine)((function*(){const{teamId:e}=o.teamContext,{customForm:t,isAlwaysPublic:r}=o.props,{formSpecs:i,FormType:a,detailValues:l,isPoll:s}=o;let{title:n,description:d,isPublic:u=!0,allowMultipleUserResponses:p}=l||{};return s&&(n="Poll"),{customFormId:yield o.makeRequest(m.default.CreateCustomForm({customFormId:null==t?void 0:t.id,teamId:e,title:n,description:d,isPublic:r||u,allowMultipleUserResponses:p,formSpecs:i,type:a}))}})),(0,l.default)(this,"_handleFormBuilderChanged",P,this),(0,l.default)(this,"_handleDetailsFormChange",O,this),(0,l.default)(this,"_handleEditPreviewChange",x,this)}get hasUnsavedChanges(){return this.hasFormBuilderChanged||this.hasDetailsChanged}get Disabled(){return!this.formSpecs||!this.isFormBuilderValid||!this.isDetailsValid||!this.hasFormBuilderChanged&&!this.hasDetailsChanged}get isPoll(){return this.FormType===n.default.Poll}get isForm(){return this.FormType===n.default.Form}get customFormPreview(){const{formSpecs:e,detailValues:t}=this;return e?new c.default(v({formSpecs:e},t)):null}get isFormMaxLength(){var e;const{formSpecs:t}=this;return!!(null==t?void 0:null===(e=t.sections)||void 0===e?void 0:e.length)&&t.sections.length>=u.MaxFormLength}get toggleOptions(){const{EditOption:e,PreviewOption:t,isPoll:o,isEditing:r,isPreviewing:i}=this;return o?[]:[v(v({},e),{},{isSelected:r}),v(v({},t),{},{isSelected:i})]}},r=(0,s.default)(o.prototype,"formSpecs",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.default.GetDefaultFormSpecs({customForm:this.props.customForm,formType:this.FormType})}}),i=(0,s.default)(o.prototype,"isFormBuilderValid",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=(0,s.default)(o.prototype,"isDetailsValid",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=(0,s.default)(o.prototype,"hasDetailsChanged",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=(0,s.default)(o.prototype,"hasFormBuilderChanged",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=(0,s.default)(o.prototype,"detailValues",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),(0,s.default)(o.prototype,"hasUnsavedChanges",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"hasUnsavedChanges"),o.prototype),(0,s.default)(o.prototype,"Disabled",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"Disabled"),o.prototype),(0,s.default)(o.prototype,"isPoll",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"isPoll"),o.prototype),(0,s.default)(o.prototype,"isForm",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"isForm"),o.prototype),P=(0,s.default)(o.prototype,"_handleFormBuilderChanged",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.isPoll&&(this.isDetailsValid=e.isValid),this.isFormBuilderValid=e.isValid,this.hasFormBuilderChanged=!0,this.formSpecs=e}}}),O=(0,s.default)(o.prototype,"_handleDetailsFormChange",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return({isValid:e,hasChanged:t,values:o})=>{this.detailValues=o,this.isDetailsValid=e,this.hasDetailsChanged=t}}}),x=(0,s.default)(o.prototype,"_handleEditPreviewChange",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.selectedToggleOption=e}}),(0,s.default)(o.prototype,"customFormPreview",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"customFormPreview"),o.prototype),(0,s.default)(o.prototype,"isFormMaxLength",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"isFormMaxLength"),o.prototype),(0,s.default)(o.prototype,"toggleOptions",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"toggleOptions"),o.prototype),t=o))||t)||t)||t};var i=r(o(15)),a=o(14),l=r(o(12)),s=r(o(3)),n=(r(o(13)),r(o(455))),d=r(o(273)),u=o(1487),p=r(o(432)),c=r(o(1663)),m=r(o(50)),f=o(2),h=r(o(39)),g=r(o(25)),b=r(o(1010));function y(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function v(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?y(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}},9739:function(e,t,o){"use strict";var r=o(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=r(o(6)),l=r(o(9740)),s=r(o(114)),n=r(o(1)),d=o(4);var u=(0,r(o(10)).default)({name:"CustomFormBuilderDetails",loader:()=>o(9741)})(i=(0,l.default)(i=(0,d.observer)(i=class extends n.default.Component{render(){const{formSpecs:e,formSpecHasFieldSpecs:t}=this,{className:o,onChange:r}=this.props;return t&&(0,a.default)(s.default,{className:o,autoFocus:!0,formSpecs:e,onChange:r})}})||i)||i)||i;t.default=u},9740:function(e,t,o){"use strict";var r=o(0);o(36),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,o,r;return t=l.computed.struct,(0,a.default)((r=class extends e{get formSpecs(){var e,t,o,r;const{teamInfo:i}=this.teamContext,{isAlwaysPublic:a,disableName:l,disableDescription:u,allowMultipleUserResponses:p,disableAllowMultipleUserResponses:c}=this.props;return{sections:[{fieldSpecs:[!l&&{type:d.default.Text,fieldName:"title",defaultValue:null===(e=this.props.customForm)||void 0===e?void 0:e.title,grow:1,label:"Title",maxLength:s.MaxFormTitleLength},!u&&{type:d.default.TextArea,fieldName:"description",header:"Enter a description",defaultValue:(null===(t=this.props.customForm)||void 0===t?void 0:t.description)||"",grow:1,size:"sm",validationFunction:n.default.ValidateTeamApplicationDescription,isOptional:!0,label:"Description",placeholder:"Description (optional)",maxLength:s.MaxFormDescriptionLength},!a&&!!i&&{type:d.default.Switch,fieldName:"isPublic",defaultValue:(null===(o=this.props.customForm)||void 0===o?void 0:o.isPublic)||(null==i?void 0:i.isPublic),grow:1,label:"Open submissions",description:"Allow submissions from everyone, including people who aren't part of your server."},p&&{type:d.default.Switch,fieldName:"allowMultipleUserResponses",defaultValue:(null===(r=this.props.customForm)||void 0===r?void 0:r.allowMultipleUserResponses)||!1,grow:1,label:"Allow multiple responses",description:"Allow a user to submit multiple responses",isDisabled:c,disabledTooltip:"You can only configure a custom form for multiple responses at creation"}].filter(Boolean)}]}}get formSpecHasFieldSpecs(){var e,t,o,r;return(null===(e=this.formSpecs)||void 0===e?void 0:null===(t=e.sections)||void 0===t?void 0:null===(o=t[0])||void 0===o?void 0:null===(r=o.fieldSpecs)||void 0===r?void 0:r.length)>0}},(0,i.default)(r.prototype,"formSpecs",[t],Object.getOwnPropertyDescriptor(r.prototype,"formSpecs"),r.prototype),(0,i.default)(r.prototype,"formSpecHasFieldSpecs",[l.computed],Object.getOwnPropertyDescriptor(r.prototype,"formSpecHasFieldSpecs"),r.prototype),o=r))||o};var i=r(o(3)),a=r(o(25)),l=o(2),s=o(1487),n=r(o(199)),d=r(o(68))},9741:function(e,t,o){var r=o(7),i=o(9742);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a,l=0,s={injectType:"lazyStyleTag",insert:"head",singleton:!1},n={};i.locals&&(n.locals=i.locals),n.use=function(e){return l++||(a=r(i,{...s,...e})),n},n.unuse=function(){l>0&&!--l&&(a(),a=null)},e.exports=n},9742:function(e,t,o){(t=o(8)(!1)).push([e.i,"",""]),e.exports=t},9743:function(e,t,o){var r=o(7),i=o(9744);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a,l=0,s={injectType:"lazyStyleTag",insert:"head",singleton:!1},n={};i.locals&&(n.locals=i.locals),n.use=function(e){return l++||(a=r(i,{...s,...e})),n},n.unuse=function(){l>0&&!--l&&(a(),a=null)},e.exports=n},9744:function(e,t,o){(t=o(8)(!1)).push([e.i,".CustomFormBuilder-container{width:648px;max-width:100%}.CustomFormBuilder-container-desktop{height:70vh;max-height:1000px}.CustomFormBuilder-container-compact{height:30vh;max-height:500px}.CustomFormBuilder-container-type-poll{height:inherit;width:100%}.CustomFormBuilder-container-type-poll .CustomFormBuilder-form-preview{padding-top:15px}.CustomFormBuilder-details-container-v2{display:flex;flex-direction:column-reverse}.CustomFormBuilder-details-form-v2{padding-top:12px;margin-top:12px;border-top:1px solid rgba(163,163,172,.2)}.CustomFormBuilder-details-form{padding:0 42px 20px 42px;border-bottom:1px solid rgba(163,163,172,.2)}@media(max-width: 721px){.CustomFormBuilder-details-form{padding:0 12px 20px 12px}}.CustomFormBuilder-edit-preview{margin-bottom:16px;margin-left:auto;width:168px}@media(max-width: 500px){.CustomFormBuilder-edit-preview{width:100%}}.CustomFormBuilder-no-specs{padding:24px 0;color:#a3a3ac;font-size:16px}.CustomFormBuilder-container-previewing .CustomFormBuilder-form-builder,.CustomFormBuilder-container-previewing .CustomFormBuilder-details-form{display:none}",""]),t.locals={confirmationGreen:"#53da33",confirmationGreenDesaturated:"#6cba50",gilded4:"#ecb200",gilded5:"#e0a900",gilded6:"#be8c00",errorRedDesaturated:"#df5353",gray:"#a3a3ac",bodyTextWhite:"#ececee",bodyTextWiteMask64:"rgba(236,236,238,.64)",border:"#848a94",errorRed:"#ff6b6b",warnYellow:"#ffb400",nuxBlue:"#008ae1",calendarOrange:"#d89332",calendarBlue:"#355bf8",calendarGreen:"#6cba50",calendarSeagreen:"#30a68f",calendarJewelgreen:"#148f33",calendarPurple:"#a250e8",calendarPurpleMask7:"rgba(162,80,232,.07)",calendarPurpleMask10:"rgba(162,80,232,.1)",mediumPurple3:"#dab9f6",mediumPurple3Mask10:"rgba(218,185,246,.1)",dropmenuGray:"#4f515d",menuGray:"#4f515d",menuGrayMask30:"rgba(79,81,93,.3)",yellowHighlight:"#ffeca0",desaturatedReddit:"#ea794f",desaturatedTwitter:"#64a9d4",desaturatedYoutube:"#cf5c58",whatsapp:"#25d366",github:"#24292e",vimeo:"#1ab7ea",gilded:"#f5c400",orangeRed:"#ff4500",gameNavBlack:"#32343d",gameNavBlackMask36:"rgba(50,52,61,.36)",white:"#fff",gilded2:"#f8d64c",gilded2Mask5:"rgba(248,214,76,.05)",gilded2Mask7:"rgba(248,214,76,.07)",gilded2Mask10:"rgba(248,214,76,.1)",gilded2Mask20:"rgba(248,214,76,.2)",gilded2Mask50:"rgba(248,214,76,.5)",nuxBlueDesaturatedMask7:"rgba(174,189,252,.07)",restGet:"#335a9e",restHead:"#a250e8",restPost:"#6cba50",restPut:"#d89332",restPatch:"#4f515d",restDelete:"#ff6b6b",mysteriousGray:"#212329",backgroundBlack:"#1e2025",yellowThree:"#ffb400",calendarGreenDesaturated:"#476047",calendarRed:"#df5353",calendarRedMask30:"rgba(223,83,83,.2)",calendarRedDesaturated:"#694148",druidOrange:"#e4b370",sidebarBlack:"#292b32",brandyPunch:"#d89332",navBlack:"#191b1f",yellow1:"gold",yellow2:"#e4c519",yellow3:"#ffb400",yellow4:"#ffb400",yellow5:"#d89f0c",yellow6:"#ffd800",yellow6Mask35:"rgba(255,216,0,.35)",gameNavGray:"#30323a",skeletonGray:"#50525f",blackPearl:"#222329",twitch:"#9146ff",bnet:"#078ad2",psn:"#00134c",xbox:"#1c6d00",steam:"#231f20",origin:"#e73b00",youtube:"red",twitter:"#1189f4",facebook:"#335a9e",switch:"#e60012",patreon:"#ff424d",roblox:"#00a2ff",epic:"#2f2d2e",bnetSecondary:"#009ae4",psnSecondary:"#2d64e6",xboxSecondary:"#52b043",steamSecondary:"#096295",twitchSecondary:"#9146ff",epicSecondary:"#0078f2",grayMask20:"rgba(163,163,172,.2)",grayMask40:"rgba(163,163,172,.4)",goldenShadow:"rgba(255,234,0,.5)",colorChannelGray:"#373943"},e.exports=t}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/CustomFormBuilder.js.map