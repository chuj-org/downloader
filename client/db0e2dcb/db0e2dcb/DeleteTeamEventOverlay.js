(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{4651:function(e,t,n){"use strict";var a=n(19),i=n(0);n(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,l,o,d=a(n(14)),r=i(n(12)),u=i(n(3)),c=(i(n(13)),i(n(295))),m=i(n(78)),p=i(n(277)),f=i(n(38)),h=i(n(71)),y=i(n(50)),v=i(n(25)),I=i(n(39)),F=i(n(738)),g=n(2),E=n(4);var b=(0,I.default)(s=(0,v.default)(s=(0,m.default)(s=(0,E.observer)((l=class extends F.default{constructor(...e){var t;super(...e),t=this,(0,r.default)(this,"numEventsInFamily",o,this),this.Header=this.props.isEditingFamily?"Delete event series":"Delete event",this.ConfirmType="delete",this.ConfirmText="Delete",this.Confirm=(0,d.coroutine)((function*(){const{teamId:e}=t.teamContext,{channelId:n}=t.teamChannelContext,{event:a,isEditingFamily:i,isFuture:s}=t.props,l=n?c.default:y.default;try{i?yield t.makeRequest(l.DeleteEventFamily({teamId:e,channelId:n,familyId:a.familyId,eventId:s&&a.id})):yield t.makeRequest(l.DeleteEvent({teamId:e,channelId:n,eventId:a.id})),f.default.emit(p.default.TeamCalendarEventMutated,{isDeleted:!0,eventId:a.id,familyId:a.familyId}),f.default.emit(h.default.StatusMessage,{type:"success",text:i?"Events have been deleted!":"Event has been deleted!"})}catch(e){f.default.emit(h.default.StatusMessage,{type:"error",text:"There was an issue deleting the event"})}}))}fetchData(){const{channelId:e}=this.teamChannelContext,{event:t,isEditingFamily:n}=this.props;return n?c.default.GetEventsByFamilyId({channelId:e,familyId:t.familyId}):d.default.resolve()}handleDataFetch(e){const{event:t,isFuture:n}=this.props;e&&(this.numEventsInFamily=n?e.filter(e=>e.happensAt>=t.happensAt).length:e.length)}get ConfirmationText(){const{numEventsInFamily:e,isLoading:t}=this,{event:n,isEditingFamily:a,isFuture:i}=this.props;return a&&i?'Are you sure you want to delete this event, and all future events in the "'.concat(n.name,'" series (').concat(t?"...":e," total events)?"):a?'Are you sure you want to delete the "'.concat(n.name,'" series of (').concat(t?"...":e,") events?"):'Are you sure you want to delete "'.concat(n.name,'"?')}},o=(0,u.default)(l.prototype,"numEventsInFamily",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,u.default)(l.prototype,"handleDataFetch",[g.action],Object.getOwnPropertyDescriptor(l.prototype,"handleDataFetch"),l.prototype),(0,u.default)(l.prototype,"ConfirmationText",[g.computed],Object.getOwnPropertyDescriptor(l.prototype,"ConfirmationText"),l.prototype),s=l))||s)||s)||s)||s;t.default=b}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/DeleteTeamEventOverlay.js.map