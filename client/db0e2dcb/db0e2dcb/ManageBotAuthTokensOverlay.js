(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{4744:function(e,t,n){"use strict";var a=n(0);n(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=a(n(20)),i=a(n(8288)),s=a(n(204)),u=a(n(1)),l=(n(2),n(4));var d=(0,s.default)(o=(0,l.observer)(o=class extends u.default.Component{constructor(...e){super(...e),this.Confirm=()=>{},this.Header="Auth tokens for ".concat(this.props.bot.name),this.Size="lg",this.IsFullWidth=!0}render(){return u.default.createElement(i.default,(0,r.default)({className:"ManageBotAuthTokensOverlay-container"},this.props))}})||o)||o;t.default=d},8083:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;a(n(14));t.default=class{static Date({value1:e,value2:t}){return e>t}}},8288:function(e,t,n){"use strict";var a=n(0);n(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=a(n(6)),i=a(n(25)),s=a(n(24)),u=a(n(8289)),l=a(n(377)),d=a(n(311)),c=a(n(1406)),p=a(n(1)),h=(n(2),n(4));var f=(0,a(n(10)).default)({name:"BotAuthTokensManager",loader:()=>n(8290)})(o=(0,u.default)(o=(0,i.default)(o=(0,h.observer)(o=class extends p.default.Component{constructor(...e){super(...e),this.RenderId=({value:e})=>(0,r.default)(s.default,{},void 0,e),this.RenderCreatedBy=({value:e})=>{const t=this.teamContext.getUser(e);return(0,r.default)(l.default,{className:"BotAuthTokensManager-originator-column",hideUserStatusIcon:!0,hideProfilePicture:!0,user:t})},this.RenderCreatedAt=({value:e})=>(0,r.default)(c.default,{timestamp:e}),this.RenderLastUsedAt=({value:e})=>e?(0,r.default)(c.default,{timestamp:e}):"Never"}render(){const{ItemManagementSpecs:e}=this;return(0,r.default)(d.default,{className:"BotAuthTokensManager-container",items:this.items,columnKeys:this.ColumnKeys,specs:e,iconComponent:null,hasLoaded:!this.isLoading&&!this.isMakingRequest})}})||o)||o)||o)||o;t.default=f},8289:function(e,t,n){"use strict";var a=n(0);n(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,a,r,v,O,k,T,B,C,I,P,w;return t=(0,p.default)([c.GenerateBotAuthTokenOverlay,c.DeleteBotAuthTokenOverlay,c.ContextMenuOverlay]),n=b.observable.ref,a=b.computed.struct,t(r=(0,l.default)(r=(0,m.default)(r=(0,d.default)((w=P=class extends e{constructor(...e){super(...e),this.ColumnKeys=Object.values(g),(0,i.default)(this,"items",O,this),this.reactions=[{dataFn:()=>this.props.bot,reaction:()=>{this.items=[],this.refetch()}}],this.fetchData=()=>{const{bot:e}=this.props;return y.default.GetBotAuthTokens({botId:e.id})},(0,i.default)(this,"handleDataFetch",k,this),(0,i.default)(this,"updateAuthTokens",T,this),(0,i.default)(this,"generateBotAuthTokenIsLoading",B,this),(0,i.default)(this,"onOpenItemOptions",C,this),(0,i.default)(this,"_handleGenerateToken",I,this)}get ItemManagementSpecs(){return{values:{[g.Id]:{label:"Public ID",itemKey:"id"},[g.CreatedBy]:{label:"Created by",itemKey:"createdBy"},[g.CreatedAt]:{label:"Created at",itemKey:"createdAt"},[g.LastUsedAt]:{label:"Last used",itemKey:"lastUsedAt"}},columns:{[g.Id]:{valueKey:g.Id,valueRenderer:this.RenderId,style:{maxWidth:300}},[g.CreatedBy]:{valueKey:g.CreatedBy,valueRenderer:this.RenderCreatedBy},[g.CreatedAt]:{valueKey:g.CreatedAt,valueRenderer:this.RenderCreatedAt,style:{maxWidth:120}},[g.LastUsedAt]:{valueKey:g.LastUsedAt,valueRenderer:this.RenderLastUsedAt,overrideStyle:{width:120}}},sort:{[g.CreatedAt]:{priority:1,compareFunc:f.default.Date},[g.LastUsedAt]:{priority:2,compareFunc:f.default.Date},[g.CreatedBy]:{priority:3,compareFunc:f.default.Date}},itemOptions:{onOpen:this.onOpenItemOptions},defaultValues:{sortKey:g.CreatedAt},display:{label:"token"},controlsSpecs:{altButtonText:"Generate token",altButtonProps:A({loading:this.generateBotAuthTokenIsLoading},this.altButtonProps),onAltButtonClick:this._handleGenerateToken}}}get altButtonProps(){return this.isLoading?{disabled:!0}:this.isLoading||this.items.length>=u.default.Validation.BotAuthTokenMaxPerBotTotal?{disabled:!0,disabledTooltip:"A bot cannot have more than ".concat(u.default.Validation.BotAuthTokenMaxPerBotTotal," tokens"),disabledTooltipDirection:"up"}:void 0}},P.displayName=e.displayName||e.name,v=w,O=(0,s.default)(v.prototype,"items",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=(0,s.default)(v.prototype,"handleDataFetch",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.updateAuthTokens(e)}}}),T=(0,s.default)(v.prototype,"updateAuthTokens",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.items=e;const t=this.teamContext.botsById,n=null==t?void 0:t[this.props.bot.id];n&&n.updateTokens({authTokens:e})}}}),B=(0,s.default)(v.prototype,"generateBotAuthTokenIsLoading",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,s.default)(v.prototype,"ItemManagementSpecs",[a],Object.getOwnPropertyDescriptor(v.prototype,"ItemManagementSpecs"),v.prototype),(0,s.default)(v.prototype,"altButtonProps",[b.computed],Object.getOwnPropertyDescriptor(v.prototype,"altButtonProps"),v.prototype),C=(0,s.default)(v.prototype,"onOpenItemOptions",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,o.coroutine)((function*({item:t,container:n}){const{bot:a}=e.props;return e.ContextMenuOverlay.Open({portalTriggerContainer:n,menuSpecs:{sections:[{name:"Actions",actions:[{label:"Delete",icon:h.default.Delete,type:"delete",destructive:!0,onClick:(r=(0,o.coroutine)((function*(){const{confirmed:n}=yield e.DeleteBotAuthTokenOverlay.Open({name:"auth token",bot:a,botAuthToken:t});n&&(0,b.runInAction)(()=>{const n=e.items.filter(e=>e.id!==t.id);e.updateAuthTokens(n)})})),function(){return r.apply(this,arguments)})}]}]}});var r}));return function(e){return t.apply(this,arguments)}}()}}),I=(0,s.default)(v.prototype,"_handleGenerateToken",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,o.coroutine)((function*(){const{bot:t}=e.props;let n;try{(0,b.runInAction)(()=>e.generateBotAuthTokenIsLoading=!0),n=yield y.default.GenerateBotAuthToken({botId:t.id})}finally{(0,b.runInAction)(()=>e.generateBotAuthTokenIsLoading=!1)}yield e.GenerateBotAuthTokenOverlay.Open({bot:t,botAuthToken:n}),(0,b.runInAction)(()=>{const t=[n,...e.items];e.updateAuthTokens(t)})}))}}),r=v))||r)||r)||r)||r},t.BotAuthTokensManagerValueKeys=void 0;var o=n(14),r=a(n(15)),i=a(n(12)),s=a(n(3)),u=(a(n(13)),a(n(211))),l=a(n(39)),d=a(n(37)),c=n(30),p=a(n(34)),h=a(n(181)),f=a(n(8083)),y=a(n(1614)),b=n(2),m=a(n(25));function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const g={Id:"id",CreatedBy:"createdBy",CreatedAt:"createdAt",LastUsedAt:"lastUsedAt"};t.BotAuthTokensManagerValueKeys=g},8290:function(e,t,n){var a=n(7),o=n(8291);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r,i=0,s={injectType:"lazyStyleTag",insert:"head",singleton:!1},u={};o.locals&&(u.locals=o.locals),u.use=function(e){return i++||(r=a(o,{...s,...e})),u},u.unuse=function(){i>0&&!--i&&(r(),r=null)},e.exports=u},8291:function(e,t,n){(t=n(8)(!1)).push([e.i,"",""]),e.exports=t}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/ManageBotAuthTokensOverlay.js.map