(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{4711:function(e,t,n){"use strict";var a=n(0);n(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i,d=a(n(3)),l=a(n(204)),s=a(n(9963)),h=a(n(25)),c=a(n(8023)),p=n(2),u=n(4);var v=(r=p.computed.struct,(0,h.default)(o=(0,l.default)(o=(0,u.observer)((i=class extends c.default{constructor(...e){super(...e),this.SettingsHeader="Channels"}get SettingsOptions(){var e;return{sections:[{header:"Channel settings",id:"Settings",actions:[!!(null===(e=this.channelMembershipRole)||void 0===e?void 0:e.CanManageChannels())&&{id:"Archived",label:"Archived",Component:s.default}].filter(Boolean)}]}}},(0,d.default)(i.prototype,"SettingsOptions",[r],Object.getOwnPropertyDescriptor(i.prototype,"SettingsOptions"),i.prototype),o=i))||o)||o)||o);t.default=v},9963:function(e,t,n){"use strict";var a=n(0);n(36),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(6)),o=a(n(12)),i=a(n(3)),d=(a(n(13)),a(n(131))),l=a(n(1)),s=n(2),h=n(4),c=a(n(39)),p=a(n(25)),u=a(n(155)),v=a(n(113)),f=a(n(670)),y=a(n(279)),m=a(n(938)),C=a(n(53));let g;var O,I,b,x,w,A,B;var T=(O=(0,a(n(10)).default)({name:"TeamChannelsArchivedPage",loader:()=>n(9964)}),I=s.computed.struct,b=s.computed.struct,O(x=(0,v.default)(x=(0,c.default)(x=(0,p.default)(x=(0,u.default)(x=(0,h.observer)((g=v.default.Listeners,w=class extends l.default.Component{constructor(...e){super(...e),(0,o.default)(this,"archivedChannelsById",A,this),this[g]=[{event:d.default.TeamChannelArchived,action:this.filterOutOtherTeams(({teamId:e,channelId:t,archivedBy:n,archivedByWebhookId:a})=>{this.addArchivedChannel({teamId:e,channelId:t,archivedBy:n,archivedByWebhookId:a})})},{event:d.default.TeamChannelRestored,action:this.filterOutOtherTeams(({teamId:e,channelId:t,channel:n})=>{this.updateChannel({teamId:e,channelId:t,channel:new y.default(n)})})}],(0,o.default)(this,"handleDataFetch",B,this)}filterOutOtherTeams(e){return t=>{t.teamId===this.teamContext.teamId&&e(t)}}addArchivedChannel({teamId:e,channelId:t,archivedBy:n,archivedByWebhookId:a}){const r=this.teamChannelsContext.channelsById[t];this.archivedChannelsById.set(t,r)}updateChannel({teamId:e,channelId:t,channel:n}){this.archivedChannelsById.set(t,n)}fetchData(){const{teamInfo:e}=this.teamContext,{groupId:t}=this.teamChannelsContext.groupContext;return f.default.GetArchivedChannels({teamId:e.id,groupId:t})}get _archivedChannels(){return[...this.archivedChannelsById.values()]}get archivedChannels(){return this._archivedChannels}get noOptionsText(){return this.hasFetched?"No channels are archived":"Archived channels loading"}get options(){const{getUser:e,teamInfo:{profilePictureSm:t}}=this.teamContext;return this.archivedChannels.map(n=>{const{name:a,createdAt:r,createdBy:o,game:i,description:d}=n,l=r.format("MMM D, YYYY"),s=e(o);return{buttonProps:{Component:C.default,className:"TeamChannelsArchivedPage-unarchive",type:"bleached",style:"hollow",text:n.isArchived?"Unarchive":"Archive"},metadata:[a,null==i?void 0:i.name,l,null==s?void 0:s.name,d].filter(Boolean).join("_"),defaultGameIcon:t,user:s,createdBy:o,channel:n,key:n.id}})}render(){return(0,r.default)(m.default,{title:"Archived channels",titleMargin:"lg",className:"TeamChannelsArchivedPage",placeholder:"Search archived channels",size:"lg",listLayout:"flex-start",options:this.options,type:"panelInfoArchiveRestore",noOptionsText:this.noOptionsText,noOptionsSearchText:"No channels match",hideSelectOptions:!0,fillContainer:!0})}},A=(0,i.default)(w.prototype,"archivedChannelsById",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),(0,i.default)(w.prototype,"addArchivedChannel",[s.action],Object.getOwnPropertyDescriptor(w.prototype,"addArchivedChannel"),w.prototype),(0,i.default)(w.prototype,"updateChannel",[s.action],Object.getOwnPropertyDescriptor(w.prototype,"updateChannel"),w.prototype),B=(0,i.default)(w.prototype,"handleDataFetch",[s.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return({channels:e})=>{this.archivedChannelsById=new Map(e.map(e=>[e.id,e]))}}}),(0,i.default)(w.prototype,"_archivedChannels",[I],Object.getOwnPropertyDescriptor(w.prototype,"_archivedChannels"),w.prototype),(0,i.default)(w.prototype,"archivedChannels",[s.computed],Object.getOwnPropertyDescriptor(w.prototype,"archivedChannels"),w.prototype),(0,i.default)(w.prototype,"noOptionsText",[s.computed],Object.getOwnPropertyDescriptor(w.prototype,"noOptionsText"),w.prototype),(0,i.default)(w.prototype,"options",[b],Object.getOwnPropertyDescriptor(w.prototype,"options"),w.prototype),x=w))||x)||x)||x)||x)||x)||x);t.default=T},9964:function(e,t,n){var a=n(7),r=n(9965);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o,i=0,d={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};r.locals&&(l.locals=r.locals),l.use=function(e){return i++||(o=a(r,{...d,...e})),l},l.unuse=function(){i>0&&!--i&&(o(),o=null)},e.exports=l},9965:function(e,t,n){(t=n(8)(!1)).push([e.i,".TeamChannelsArchivedPage{height:100%;display:flex;flex-direction:column;width:604px;padding:24px 32px}",""]),e.exports=t}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/TeamChannelsSettingsOverlay.js.map