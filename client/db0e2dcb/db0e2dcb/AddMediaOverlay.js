(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{4431:function(e,t,a){"use strict";var o=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,o(a(85)).default)("uploadQueueContext");t.default=r},4472:function(e,t,a){"use strict";var o=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(20)),i=o(a(40)),d=o(a(1439)),n=o(a(41)),l=o(a(23)),p=o(a(1)),s=(o(a(14)),a(2),a(4)),u=o(a(10));const c=["className","src","controls","dynamicMediaInfo","alternativeFormat"];var f;var y=(0,u.default)({name:"ImageOrVideo",loader:()=>a(4473)})(f=(0,s.observer)(f=class extends p.default.Component{render(){const e=this.props,{className:t,src:a,controls:o,dynamicMediaInfo:s,alternativeFormat:u}=e,f=(0,i.default)(e,c);return l.default.isRawVideoUrl(a)?p.default.createElement(d.default,(0,r.default)({},f,{className:t,controls:o,src:a,useNativeControls:!0})):p.default.createElement(n.default,(0,r.default)({className:t,src:a,dynamicMediaInfo:s,alternativeFormat:u},f))}})||f)||f;t.default=y},4473:function(e,t,a){var o=a(7),r=a(4474);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i,d=0,n={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};r.locals&&(l.locals=r.locals),l.use=function(e){return d++||(i=o(r,{...n,...e})),l},l.unuse=function(){d>0&&!--d&&(i(),i=null)},e.exports=l},4474:function(e,t,a){(t=a(8)(!1)).push([e.i,"",""]),e.exports=t},4667:function(e,t,a){"use strict";var o=a(0);a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,d=o(a(6)),n=o(a(3)),l=o(a(103)),p=o(a(9481)),s=o(a(9502)),u=o(a(273)),c=o(a(1)),f=a(2);var y=(0,o(a(10)).default)({name:"AddMediaOverlay",loader:()=>a(9503)})(r=(0,s.default)((i=class extends c.default.Component{constructor(...e){super(...e),this.IsContentScrollable=!0}get IsUnstyled(){return this.isEditing||!!this.CompletedUploads.length||this.hasMultipleMedia}get IsSmallWidth(){return!this.IsUnstyled}get ConfirmText(){const{isEditing:e,hasMultipleMedia:t}=this;return e?"Save":t?"Done":"Add"}get ControlConfiguration(){const{showControls:e}=this;return e?u.default.ConfirmAndCancel:null}render(){const{tagOptions:e,uploadOnly:t,media:a}=this.props,{isEditing:o,channelId:r}=this;return(0,d.default)(p.default,{className:"AddMediaOverlay-media-adder",channelId:r,autoFocusEditor:!o,uploadOnly:t,media:a,tagOptions:e,dynamicMediaType:l.default.MediaChannelUpload})}},(0,n.default)(i.prototype,"IsUnstyled",[f.computed],Object.getOwnPropertyDescriptor(i.prototype,"IsUnstyled"),i.prototype),(0,n.default)(i.prototype,"IsSmallWidth",[f.computed],Object.getOwnPropertyDescriptor(i.prototype,"IsSmallWidth"),i.prototype),(0,n.default)(i.prototype,"ConfirmText",[f.computed],Object.getOwnPropertyDescriptor(i.prototype,"ConfirmText"),i.prototype),(0,n.default)(i.prototype,"ControlConfiguration",[f.computed],Object.getOwnPropertyDescriptor(i.prototype,"ControlConfiguration"),i.prototype),r=i))||r)||r;t.default=y},5094:function(e,t,a){"use strict";var o=a(0);a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,o,n,l;return t=i.computed.struct,(0,d.default)((l=n=class extends e{constructor(...e){super(...e),this.CancelUpload=e=>this.UploadQueueStore.CancelUpload(e),this.RemoveUpload=e=>this.UploadQueueStore.RemoveUpload(e)}get UploadQueueStore(){return this.uploadStore||this.uploadQueueContext.uploadStore}get CompletedUploads(){return this.UploadQueueStore.CompletedUploads||[]}get PendingUploads(){return this.UploadQueueStore.Uploads||[]}get UploadErrors(){return this.UploadQueueStore.UploadErrors||[]}get CanceledUploads(){return this.UploadQueueStore.CanceledUploads||[]}componentDidMount(){super.componentDidMount,super.componentDidMount(),this.uploadManagerId=this.registerUploadManager?this.registerUploadManager(this):this.uploadQueueContext.registerUploadManager(this)}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount();const{uploadManagerId:e}=this;this.unregisterUploadManager?this.unregisterUploadManager(e):this.uploadQueueContext.unregisterUploadManager(e)}},n.displayName=e.displayName||e.name,o=l,(0,r.default)(o.prototype,"UploadQueueStore",[t],Object.getOwnPropertyDescriptor(o.prototype,"UploadQueueStore"),o.prototype),(0,r.default)(o.prototype,"CompletedUploads",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"CompletedUploads"),o.prototype),(0,r.default)(o.prototype,"PendingUploads",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"PendingUploads"),o.prototype),(0,r.default)(o.prototype,"UploadErrors",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"UploadErrors"),o.prototype),(0,r.default)(o.prototype,"CanceledUploads",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"CanceledUploads"),o.prototype),a=o))||a};var r=o(a(3)),i=a(2),d=o(a(4431))},5113:function(e,t,a){"use strict";var o=a(0),r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UploadState=void 0;var i,d,n,l,p,s,u=o(a(15)),c=r(a(14)),f=o(a(12)),y=o(a(3)),m=(o(a(13)),o(a(17))),g=a(2);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const O={Pending:"Pending",Completed:"Completed",Error:"Error",Canceled:"Canceled"};t.UploadState=O;var v=(i=g.computed.struct,d=g.computed.struct,n=g.computed.struct,l=g.computed.struct,p=class{constructor(){(0,f.default)(this,"_uploads",s,this),this.GetUpload=e=>this._uploads.find(t=>this.isSameUpload(t,e)),this.isSameUpload=(e,t)=>{var a,o,r,i,d,n;const l=((null===(a=e.file)||void 0===a?void 0:a.uuid)||(null===(o=e.file)||void 0===o?void 0:null===(r=o.upload)||void 0===r?void 0:r.uuid))===((null===(i=t.file)||void 0===i?void 0:i.uuid)||(null===(d=t.file)||void 0===d?void 0:null===(n=d.upload)||void 0===n?void 0:n.uuid)),p=e.link&&t.link&&e.link===t.link;return l||p}}get UploadErrors(){return this._uploads.filter(e=>e.uploadStatus===O.Error)}get Uploads(){return this._uploads.filter(e=>e.uploadStatus===O.Pending)}get CompletedUploads(){return this._uploads.filter(e=>e.uploadStatus===O.Completed)}get CanceledUploads(){return this._uploads.filter(e=>e.uploadStatus===O.Canceled)}get IsUploading(){return!!this.Uploads.length}QueueUpload(e,t){var a=this;return(0,c.coroutine)((function*(){a.addUploadInfo(e)}))()}AddOutOfBandUpload(e){var t=this;return(0,c.coroutine)((function*(){t.addUploadInfo(e,!0)}))()}CompleteUpload(e){const t=this.GetUpload(e);t&&t.updateUploadInfo({uploadStatus:O.Completed})}OnUploadError(e){const t=this.GetUpload(e);t&&t.updateUploadInfo(b(b({},e),{},{uploadStatus:O.Error}))}RemoveUpload(e){this._uploads=this._uploads.filter(t=>!this.isSameUpload(t,e))}CancelUpload(e){const t=this.GetUpload(e);t&&t.updateUploadInfo({uploadStatus:O.Canceled})}GetUploads({type:e=O.Pending}={}){return this._uploads.filter(t=>t.uploadStatus===e)}addUploadInfo(e,t){var a=this;return(0,c.coroutine)((function*(){(0,m.default)(e.file||e.link,"uploadInfo.file || uploadInfo.link is required"),e.updateUploadInfo({uploadStatus:O.Pending,ignoreQueue:t}),a._uploads.push(e)}))()}},s=(0,y.default)(p.prototype,"_uploads",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,y.default)(p.prototype,"UploadErrors",[i],Object.getOwnPropertyDescriptor(p.prototype,"UploadErrors"),p.prototype),(0,y.default)(p.prototype,"Uploads",[d],Object.getOwnPropertyDescriptor(p.prototype,"Uploads"),p.prototype),(0,y.default)(p.prototype,"CompletedUploads",[n],Object.getOwnPropertyDescriptor(p.prototype,"CompletedUploads"),p.prototype),(0,y.default)(p.prototype,"CanceledUploads",[l],Object.getOwnPropertyDescriptor(p.prototype,"CanceledUploads"),p.prototype),(0,y.default)(p.prototype,"IsUploading",[g.computed],Object.getOwnPropertyDescriptor(p.prototype,"IsUploading"),p.prototype),(0,y.default)(p.prototype,"QueueUpload",[g.action],Object.getOwnPropertyDescriptor(p.prototype,"QueueUpload"),p.prototype),(0,y.default)(p.prototype,"AddOutOfBandUpload",[g.action],Object.getOwnPropertyDescriptor(p.prototype,"AddOutOfBandUpload"),p.prototype),(0,y.default)(p.prototype,"CompleteUpload",[g.action],Object.getOwnPropertyDescriptor(p.prototype,"CompleteUpload"),p.prototype),(0,y.default)(p.prototype,"OnUploadError",[g.action],Object.getOwnPropertyDescriptor(p.prototype,"OnUploadError"),p.prototype),(0,y.default)(p.prototype,"RemoveUpload",[g.action],Object.getOwnPropertyDescriptor(p.prototype,"RemoveUpload"),p.prototype),(0,y.default)(p.prototype,"CancelUpload",[g.action],Object.getOwnPropertyDescriptor(p.prototype,"CancelUpload"),p.prototype),p);t.default=v},5148:function(e,t,a){"use strict";var o=a(0);a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,d=o(a(6)),n=o(a(3)),l=o(a(37)),p=o(a(23)),s=o(a(11)),u=o(a(1)),c=a(2),f=a(4),y=o(a(4472)),m=o(a(4483));var g=(0,o(a(10)).default)({name:"MediaPreviewer",loader:()=>a(5149)})(r=(0,l.default)(r=(0,f.observer)((i=class extends u.default.Component{constructor(...e){super(...e),this.reactions=[{dataFn:()=>this.isVideoItem&&!this.isRawVideo,reaction:e=>{e&&this._onMediaLoaded()},fireImmediately:!0}],this._onMediaLoaded=()=>{const{onLoad:e}=this.props;e&&e()},this._onMediaFailed=()=>{const{onError:e}=this.props;e&&e()}}get isVideoItem(){const{media:e}=this.props;return e&&e.isVideoItem}get playbackSource(){const{media:e}=this.props;return e&&e.playbackSource||""}get isRawVideo(){const{playbackSource:e}=this;return p.default.isRawVideoUrl(e)}get showGuildedVideo(){const{isRawVideo:e,isVideoItem:t,playbackSource:a}=this;return!e&&t&&a}get showImageOrVideo(){const{isRawVideo:e,isVideoItem:t,playbackSource:a}=this;return(e||!t)&&a}render(){const{playbackSource:e,showGuildedVideo:t,showImageOrVideo:a,isRawVideo:o}=this,{className:r,showMediaControls:i=!1,media:n,alternativeFormat:l}=this.props;return(0,d.default)("div",{className:(0,s.default)("MediaPreviewer-container",o&&"MediaPreviewer-container-is-raw-video",r)},void 0,a&&(0,d.default)(y.default,{className:"MediaPreviewer-media-raw",autoPlay:!0,loop:!0,controls:i,src:e,onLoad:this._onMediaLoaded,onLoadedData:this._onMediaLoaded,onError:this._onMediaFailed,dynamicMediaInfo:n.dynamicMediaInfo,alternativeFormat:l},!!e),t&&(0,d.default)(m.default,{className:"MediaPreviewer-media-embedded",video:n,autoPlay:!0,onLoad:this._onMediaLoaded,onError:this._onMediaFailed}))}},(0,n.default)(i.prototype,"isVideoItem",[c.computed],Object.getOwnPropertyDescriptor(i.prototype,"isVideoItem"),i.prototype),(0,n.default)(i.prototype,"playbackSource",[c.computed],Object.getOwnPropertyDescriptor(i.prototype,"playbackSource"),i.prototype),(0,n.default)(i.prototype,"isRawVideo",[c.computed],Object.getOwnPropertyDescriptor(i.prototype,"isRawVideo"),i.prototype),(0,n.default)(i.prototype,"showGuildedVideo",[c.computed],Object.getOwnPropertyDescriptor(i.prototype,"showGuildedVideo"),i.prototype),(0,n.default)(i.prototype,"showImageOrVideo",[c.computed],Object.getOwnPropertyDescriptor(i.prototype,"showImageOrVideo"),i.prototype),r=i))||r)||r)||r;t.default=g},5149:function(e,t,a){var o=a(7),r=a(5150);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i,d=0,n={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};r.locals&&(l.locals=r.locals),l.use=function(e){return d++||(i=o(r,{...n,...e})),l},l.unuse=function(){d>0&&!--d&&(i(),i=null)},e.exports=l},5150:function(e,t,a){(t=a(8)(!1)).push([e.i,".MediaPreviewer-container{height:100%;max-height:100%;width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;flex:1 1 auto;justify-content:center}.MediaPreviewer-media-raw,.MediaPreviewer-media-embeded{max-height:100%;max-width:100%;display:block;margin:auto;object-fit:contain;height:100%;width:auto}.MediaPreviewer-container-is-raw-video .MediaPreviewer-media-raw{height:auto;display:flex}.MediaPreviewer-media-embedded{width:100%;align-self:center}",""]),e.exports=t},5284:function(e,t,a){"use strict";var o=a(19),r=a(0);a(36),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(15)),d=a(14),n=r(a(295)),l=r(a(17)),p=o(a(235));function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.default=class{static SaveMedia({media:e,teamId:t,gameId:a,userId:o,channelId:r}){return(0,d.coroutine)((function*(){(0,l.default)(e,"media is required"),(0,l.default)(t||o,"teamId || userId is required");const{externalSourceId:i,sourceName:d,url:s,thumbnailUrl:c,tags:f,description:y,title:m,id:g,src:h,srcThumbnail:b,additionalInfo:O,type:v,visibility:M}=e,w=O||{};let U=null,P=null;if(g)U=h,P=b;else switch(U=s,P=c,d){case p.default.YouTube:w.externalVideoSrc=(0,p.GetYoutubeVideoEmbeddedLink)(i);break;case p.default.Twitch:w.externalVideoSrc=(0,p.GetTwitchClipEmbeddedLink)(i)}let I={id:g,type:v,title:m,description:y||"",tags:f||[],src:U,additionalInfo:w,visibility:M,srcThumbnail:P};if(!!t)return I=u(u({},I),{},{teamId:t,gameId:a}),yield n.default.AddMedia({mediaInfo:I,channelId:r})}))()}}},8220:function(e,t,a){"use strict";var o=a(0);a(36),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=o(a(15)),d=o(a(3)),n=o(a(198)),l=a(5113),p=o(a(17)),s=o(a(554)),u=a(2),c=o(a(399)),f=o(a(18));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}let g=(r=class extends s.default{constructor(e){var t;(0,p.default)(e.link||e.file,"mediaInfo.link || mediaInfo.file is required"),super(m(m({},e),{},{description:f.default.IsNative?e.description:e.description||(null===(t=e.file)||void 0===t?void 0:t.name)||"Untitled media",isValid:!0}));const a=e.file;this.file=a,this.file&&(this.file.noThumbnail=e.noThumbnail),this.file&&(this.file.dynamicMediaType=e.dynamicMediaType),this.fileId=a?"".concat(a.name,"-").concat(a.size,"-").concat(a.lastModified):null,this.link=e.link}get persist(){return this.mediaInfo.persist}get ignoreQueue(){return this.mediaInfo.ignoreQueue}get dynamicMediaType(){return this.mediaInfo.dynamicMediaType}get isFileUpload(){return!0}get isUploaded(){return this.uploadStatus===l.UploadState.Completed}get isCompleted(){return this.isUploaded&&!!this.mediaInfo.id}get error(){return this.mediaInfo.error}get uploadId(){return c.default.ToHash(this.link||this.fileId)}get uploadStatus(){return this.mediaInfo.uploadStatus}get uploadFileType(){return this.type?this.type:this.isVideoItem?n.default.Video:n.default.Image}updateUploadInfo(e){var t;this.id=this.id||e.id;const a=e.id?e.src:this.src||e.src||(null===(t=e.file)||void 0===t?void 0:t.dataURL),o=e.uploadStatus===l.UploadState.Completed||!!this.isUploaded,r=e.uploadStatus===l.UploadState.Error,i=o||r?null:this.file,d=r?{text:e.text,type:"error"}:this.error;super.updateMediaInfo(m(m({},e),{},{file:i,src:a,error:d}))}},(0,d.default)(r.prototype,"persist",[u.computed],Object.getOwnPropertyDescriptor(r.prototype,"persist"),r.prototype),(0,d.default)(r.prototype,"ignoreQueue",[u.computed],Object.getOwnPropertyDescriptor(r.prototype,"ignoreQueue"),r.prototype),(0,d.default)(r.prototype,"dynamicMediaType",[u.computed],Object.getOwnPropertyDescriptor(r.prototype,"dynamicMediaType"),r.prototype),(0,d.default)(r.prototype,"isFileUpload",[u.computed],Object.getOwnPropertyDescriptor(r.prototype,"isFileUpload"),r.prototype),(0,d.default)(r.prototype,"isUploaded",[u.computed],Object.getOwnPropertyDescriptor(r.prototype,"isUploaded"),r.prototype),(0,d.default)(r.prototype,"isCompleted",[u.computed],Object.getOwnPropertyDescriptor(r.prototype,"isCompleted"),r.prototype),(0,d.default)(r.prototype,"error",[u.computed],Object.getOwnPropertyDescriptor(r.prototype,"error"),r.prototype),(0,d.default)(r.prototype,"uploadId",[u.computed],Object.getOwnPropertyDescriptor(r.prototype,"uploadId"),r.prototype),(0,d.default)(r.prototype,"uploadStatus",[u.computed],Object.getOwnPropertyDescriptor(r.prototype,"uploadStatus"),r.prototype),(0,d.default)(r.prototype,"uploadFileType",[u.computed],Object.getOwnPropertyDescriptor(r.prototype,"uploadFileType"),r.prototype),(0,d.default)(r.prototype,"updateUploadInfo",[u.action],Object.getOwnPropertyDescriptor(r.prototype,"updateUploadInfo"),r.prototype),r);t.default=g},9481:function(e,t,a){"use strict";var o=a(0);a(59),a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(15)),i=o(a(40)),d=o(a(6)),n=a(14),l=o(a(12)),p=o(a(3)),s=(o(a(13)),a(420)),u=o(a(64)),c=o(a(1491)),f=o(a(8452)),y=o(a(1010)),m=o(a(5094)),g=o(a(8453)),h=o(a(17)),b=o(a(8220)),O=o(a(56)),v=o(a(22)),M=o(a(25)),w=o(a(46)),U=o(a(9494)),P=o(a(11)),I=o(a(1)),j=a(2),C=a(4),x=o(a(10));const S=["url"];var D,E,k,_,T,V,F,N,G,R,A,L;function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var z=(D=(0,x.default)({name:"MediaAdderV3",loader:()=>a(9500)}),E=f.default.FullScreen,k=j.computed.struct,_=j.computed.struct,D(T=(0,m.default)(T=(0,M.default)(T=(0,v.default)(T=(0,O.default)(T=(0,w.default)(T=E(T=(0,y.default)(T=(0,C.observer)((V=class extends I.default.Component{constructor(e){var t;super(e),t=this,(0,l.default)(this,"hasUnsavedChanges",F,this),(0,l.default)(this,"_handleUploadStart",N,this),(0,l.default)(this,"_handleUploadCanceled",G,this),(0,l.default)(this,"_handleMultiFileUpload",R,this),this._handleUploadSelected=function(){var e=(0,n.coroutine)((function*({file:e}){const{teamId:a}=t.teamContext,{gameId:o}=t.gameContext,{userId:r}=t.userContext,{channelId:i,dynamicMediaType:d}=t.props,n=new FormData;n.append("file",e),t.UploadQueueStore.QueueUpload(new b.default({file:{name:e.name,lastModified:e.lastModified,formData:n,uuid:(0,s.rstr)()},teamId:a,gameId:o,createdBy:r,dynamicMediaType:d,channelId:i}))}));return function(t){return e.apply(this,arguments)}}(),this._getMediaItemKey=e=>e.isFileUpload?e.uploadId:e.id,(0,l.default)(this,"_handleUploadCompleted",A,this),(0,l.default)(this,"_handleMediaInfoChanged",L,this),(0,h.default)(this.editingExistingMedia||e.dynamicMediaType,"MediaAdderV3 must be provided with a valid dynamicMediaType for uploading")}get editingExistingMedia(){return!!this.props.media}get addedMedia(){const{queuedMediaUploads:e}=this,{media:t}=this.props;return t?[t]:e}get queuedMediaUploads(){return[...this.PendingUploads,...this.CompletedUploads].sort((e,t)=>e.uploadId.localeCompare(t.uploadId))}render(){const{addedMedia:e}=this,{tagOptions:t,uploadOnly:a,autoFocusEditor:o,dynamicMediaType:r,className:i}=this.props;return(0,d.default)(I.default.Fragment,{},void 0,a||0===e.length?(0,d.default)(g.default,{className:(0,P.default)("MediaAdderV3-upload-box",i),onUploadStart:this._handleUploadStart,onUploadComplete:this._handleUploadCompleted,onUploadCanceled:this._handleUploadCanceled,dynamicMediaTypeId:r.Id,handleMultiFileUpload:this._handleMultiFileUpload,allowThirdPartyMedia:!0}):null,!a&&(0,d.default)("div",{className:(0,P.default)("MediaAdderV3-media-editors-container",i)},void 0,e.map(a=>(0,d.default)(U.default,{className:"MediaAdderV3-editor",autoFocus:o&&1===e.length,tagOptions:t,isInvalidUntilLoad:!0,onMediaInfoChange:this._handleMediaInfoChanged,media:a},this._getMediaItemKey(a)))))}},F=(0,p.default)(V.prototype,"hasUnsavedChanges",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=(0,p.default)(V.prototype,"_handleUploadStart",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.hasUnsavedChanges=!0}}}),G=(0,p.default)(V.prototype,"_handleUploadCanceled",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>this.hasUnsavedChanges=!1}}),(0,p.default)(V.prototype,"editingExistingMedia",[j.computed],Object.getOwnPropertyDescriptor(V.prototype,"editingExistingMedia"),V.prototype),(0,p.default)(V.prototype,"addedMedia",[k],Object.getOwnPropertyDescriptor(V.prototype,"addedMedia"),V.prototype),(0,p.default)(V.prototype,"queuedMediaUploads",[_],Object.getOwnPropertyDescriptor(V.prototype,"queuedMediaUploads"),V.prototype),R=(0,p.default)(V.prototype,"_handleMultiFileUpload",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{const t=[];let a=0;e.forEach(e=>{c.default.GetFileValidationFriendlyErrorString({file:e})?a++:t.push(e)}),t.length>10?this.statusContext.displayError({message:"Sorry, you can upload maximum ".concat(10," files at once")}):(a>0&&this.statusContext.displayStatus({message:"".concat(a," ").concat(u.default.Pluralize({amount:a,label:"file"})," ").concat(u.default.GetVerbString({amount:a,action:"invalid"})," out of ").concat(e.length),type:"info"}),t.length>0&&(this.hasUnsavedChanges=!0,t.forEach(e=>this._handleUploadSelected({file:e}))))}}}),A=(0,p.default)(V.prototype,"_handleUploadCompleted",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t;let{url:a}=e,o=(0,i.default)(e,S);const{noThumbnail:r}=this,{teamId:d}=this.teamContext,{gameId:n}=this.gameContext,l=null===(t=this.userContext)||void 0===t?void 0:t.userId,{channelId:p,dynamicMediaType:s}=this.props;this.UploadQueueStore.AddOutOfBandUpload(new b.default(B(B({},o),{},{link:a,url:a,teamId:d,gameId:n,createdBy:l,noThumbnail:r,channelId:p,dynamicMediaType:s})))}}}),L=(0,p.default)(V.prototype,"_handleMediaInfoChanged",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.hasUnsavedChanges=!0,t.updateMediaInfo(e)}}}),T=V))||T)||T)||T)||T)||T)||T)||T)||T)||T);t.default=z},9494:function(e,t,a){"use strict";var o=a(0);a(36),a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,d,n,l,p,s,u,c=o(a(15)),f=o(a(6)),y=o(a(12)),m=o(a(3)),g=(o(a(13)),o(a(18))),h=o(a(11)),b=o(a(1)),O=a(2),v=a(4),M=o(a(109)),w=o(a(9495)),U=o(a(5148)),P=o(a(554));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=(r=(0,o(a(10)).default)({name:"MediaEditor",loader:()=>a(9498)}),i=O.computed.struct,r(d=(0,v.observer)((n=class extends b.default.Component{constructor(...e){super(...e),(0,y.default)(this,"isLoading",l,this),(0,y.default)(this,"mediaMetadata",p,this),this._isMediaDataValid=!1,(0,y.default)(this,"_handleMetadataChanged",s,this),(0,y.default)(this,"_onMediaLoaded",u,this),this._handleConfirm=()=>{const{onConfirm:e}=this.props;e&&e(this.mediaMetadata)},this._handleCancel=()=>{const{onCancel:e}=this.props;e&&e()}}get mediaModel(){const{media:e}=this.props;return e&&e.mediaInfo?e:new P.default(e||{})}get optimisticMediaMetadata(){const{mediaModel:e}=this,{title:t,description:a,tags:o,visibility:r}=e.mediaInfo,i=this.mediaMetadata||{};return{title:t||i.title,description:a||i.description,tags:o||i.tags,visibility:r||i.visibility||"public",isValid:i.isValid}}get alternativeFormat(){var e,t;const{mediaModel:a}=this;return null===(e=a.dynamicMediaInfo)||void 0===e?void 0:null===(t=e.alternativeFormat)||void 0===t?void 0:t.Preview}render(){const{tagOptions:e,autoFocus:t=!0,className:a}=this.props,{isLoading:o,mediaModel:r,optimisticMediaMetadata:{title:i,description:d,tags:n,visibility:l},alternativeFormat:p}=this;return(0,f.default)("div",{className:(0,h.default)({"MediaEditor-container-desktop":g.default.IsDesktop,"MediaEditor-container-mobile":!g.default.IsDesktop},a)},void 0,(0,f.default)("div",{className:"MediaEditor-media-preview-info"},void 0,(0,f.default)("div",{className:"MediaEditor-media"},void 0,(0,f.default)(U.default,{media:r,onLoad:this._onMediaLoaded,alternativeFormat:p}),o&&(0,f.default)("div",{className:"MediaEditor-loading-animation-wrapper"},void 0,(0,f.default)(M.default,{}))),(0,f.default)(w.default,{className:"MediaEditor-media-info",autoFocus:t,onChange:this._handleMetadataChanged,title:i,description:d,tags:n,tagOptions:e,visibility:l},r.id)))}},l=(0,m.default)(n.prototype,"isLoading",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=(0,m.default)(n.prototype,"mediaMetadata",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=(0,m.default)(n.prototype,"_handleMetadataChanged",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{const{onMediaInfoChange:t,isInvalidUntilLoad:a}=this.props,{mediaModel:o}=this;this.mediaMetadata=j(j({},this.mediaMetadata),e),a&&this.isLoading&&(this._isMediaDataValid=this.mediaMetadata.isValid,this.mediaMetadata.isValid=!1),t&&t(this.mediaMetadata,o)}}}),u=(0,m.default)(n.prototype,"_onMediaLoaded",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{const{onMediaInfoChange:e,isInvalidUntilLoad:t}=this.props,{mediaMetadata:a,mediaModel:o}=this;this.isLoading=!1,t&&this._isMediaDataValid&&(a.isValid=!0,e&&e(a,o))}}}),(0,m.default)(n.prototype,"mediaModel",[O.computed],Object.getOwnPropertyDescriptor(n.prototype,"mediaModel"),n.prototype),(0,m.default)(n.prototype,"optimisticMediaMetadata",[i],Object.getOwnPropertyDescriptor(n.prototype,"optimisticMediaMetadata"),n.prototype),(0,m.default)(n.prototype,"alternativeFormat",[O.computed],Object.getOwnPropertyDescriptor(n.prototype,"alternativeFormat"),n.prototype),d=n))||d)||d);t.default=C},9495:function(e,t,a){"use strict";var o=a(0);a(36),a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=o(a(6)),d=o(a(15)),n=o(a(25)),l=o(a(114)),p=o(a(68)),s=o(a(11)),u=o(a(1)),c=(a(2),a(4));function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m=(0,o(a(10)).default)({name:"MediaMetadataEditor",loader:()=>a(9496)})(r=(0,n.default)(r=(0,c.observer)(r=class extends u.default.Component{constructor(...e){super(...e),this.MAX_DESCRIPTION_LENGTH=2048,this.formSpecs={sections:[{fieldSpecs:[{type:p.default.Text,fieldName:"description",label:"Description",defaultValue:this.props.description,maxLength:this.MAX_DESCRIPTION_LENGTH,placeholder:"Caption (optional)",isOptional:!0,grow:1},{type:p.default.Tag,fieldName:"tags",defaultValue:this.props.tags,tagOptions:this.props.tagOptions,label:"Tags (optional)",isOptional:!0,grow:1}].filter(Boolean)}]},this._handleFormChanged=e=>{if(!e.hasChanged)return;const{onChange:t}=this.props;t&&t(y(y({},e.values),{},{isValid:e.isValid}))}}render(){const{formSpecs:e}=this,{className:t,autoFocus:a}=this.props;return(0,i.default)("div",{className:(0,s.default)("MediaMetadataEditor-container",t)},void 0,(0,i.default)(l.default,{autoFocus:a,formSpecs:e,onChange:this._handleFormChanged}))}})||r)||r)||r;t.default=m},9496:function(e,t,a){var o=a(7),r=a(9497);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i,d=0,n={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};r.locals&&(l.locals=r.locals),l.use=function(e){return d++||(i=o(r,{...n,...e})),l},l.unuse=function(){d>0&&!--d&&(i(),i=null)},e.exports=l},9497:function(e,t,a){(t=a(8)(!1)).push([e.i,"",""]),e.exports=t},9498:function(e,t,a){var o=a(7),r=a(9499);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i,d=0,n={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};r.locals&&(l.locals=r.locals),l.use=function(e){return d++||(i=o(r,{...n,...e})),l},l.unuse=function(){d>0&&!--d&&(i(),i=null)},e.exports=l},9499:function(e,t,a){(t=a(8)(!1)).push([e.i,".MediaEditor-media-preview-info{position:relative;display:flex;flex-direction:row;flex-wrap:nowrap;max-height:100%}.MediaEditor-media{position:relative;margin:auto;flex:0 0 auto}.MediaEditor-loading-animation-wrapper{background-color:#4f515d;position:absolute;margin:auto;flex:0 0 auto;display:flex;flex-direction:row;align-items:center;justify-content:center}.MediaEditor-media-info{flex:1 1 auto}.MediaEditor-container-desktop{height:auto;background-color:#292b32}.MediaEditor-container-desktop .MediaEditor-media{padding-right:40px;width:348px;height:268px}.MediaEditor-container-desktop .MediaEditor-loading-animation-wrapper{top:0;width:308px;height:268px}.MediaEditor-container-desktop .MediaEditor-media-info{min-width:320px;max-width:320px;margin-top:-10px}.MediaEditor-container-mobile{width:100%;height:100%;background-color:#292b32}.MediaEditor-container-mobile .MediaEditor-media{height:300px;width:100%}.MediaEditor-container-mobile .MediaEditor-loading-animation-wrapper{top:0;height:300px;width:100%}.MediaEditor-container-mobile .MediaEditor-media-info{padding:25px 0 100px 0;flex:1 1 auto}.MediaEditor-container-mobile .MediaEditor-media-preview-info{flex-direction:column}",""]),t.locals={confirmationGreen:"#53da33",confirmationGreenDesaturated:"#6cba50",gilded4:"#ecb200",gilded5:"#e0a900",gilded6:"#be8c00",errorRedDesaturated:"#df5353",gray:"#a3a3ac",bodyTextWhite:"#ececee",bodyTextWiteMask64:"rgba(236,236,238,.64)",border:"#848a94",errorRed:"#ff6b6b",warnYellow:"#ffb400",nuxBlue:"#008ae1",calendarOrange:"#d89332",calendarBlue:"#355bf8",calendarGreen:"#6cba50",calendarSeagreen:"#30a68f",calendarJewelgreen:"#148f33",calendarPurple:"#a250e8",calendarPurpleMask7:"rgba(162,80,232,.07)",calendarPurpleMask10:"rgba(162,80,232,.1)",mediumPurple3:"#dab9f6",mediumPurple3Mask10:"rgba(218,185,246,.1)",dropmenuGray:"#4f515d",menuGray:"#4f515d",menuGrayMask30:"rgba(79,81,93,.3)",yellowHighlight:"#ffeca0",desaturatedReddit:"#ea794f",desaturatedTwitter:"#64a9d4",desaturatedYoutube:"#cf5c58",whatsapp:"#25d366",github:"#24292e",vimeo:"#1ab7ea",gilded:"#f5c400",orangeRed:"#ff4500",gameNavBlack:"#32343d",gameNavBlackMask36:"rgba(50,52,61,.36)",white:"#fff",gilded2:"#f8d64c",gilded2Mask5:"rgba(248,214,76,.05)",gilded2Mask7:"rgba(248,214,76,.07)",gilded2Mask10:"rgba(248,214,76,.1)",gilded2Mask20:"rgba(248,214,76,.2)",gilded2Mask50:"rgba(248,214,76,.5)",nuxBlueDesaturatedMask7:"rgba(174,189,252,.07)",restGet:"#335a9e",restHead:"#a250e8",restPost:"#6cba50",restPut:"#d89332",restPatch:"#4f515d",restDelete:"#ff6b6b",mysteriousGray:"#212329",backgroundBlack:"#1e2025",yellowThree:"#ffb400",calendarGreenDesaturated:"#476047",calendarRed:"#df5353",calendarRedMask30:"rgba(223,83,83,.2)",calendarRedDesaturated:"#694148",druidOrange:"#e4b370",sidebarBlack:"#292b32",brandyPunch:"#d89332",navBlack:"#191b1f",yellow1:"gold",yellow2:"#e4c519",yellow3:"#ffb400",yellow4:"#ffb400",yellow5:"#d89f0c",yellow6:"#ffd800",yellow6Mask35:"rgba(255,216,0,.35)",gameNavGray:"#30323a",skeletonGray:"#50525f",blackPearl:"#222329",twitch:"#9146ff",bnet:"#078ad2",psn:"#00134c",xbox:"#1c6d00",steam:"#231f20",origin:"#e73b00",youtube:"red",twitter:"#1189f4",facebook:"#335a9e",switch:"#e60012",patreon:"#ff424d",roblox:"#00a2ff",epic:"#2f2d2e",bnetSecondary:"#009ae4",psnSecondary:"#2d64e6",xboxSecondary:"#52b043",steamSecondary:"#096295",twitchSecondary:"#9146ff",epicSecondary:"#0078f2",grayMask20:"rgba(163,163,172,.2)",grayMask40:"rgba(163,163,172,.4)",goldenShadow:"rgba(255,234,0,.5)",colorChannelGray:"#373943"},e.exports=t},9500:function(e,t,a){var o=a(7),r=a(9501);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i,d=0,n={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};r.locals&&(l.locals=r.locals),l.use=function(e){return d++||(i=o(r,{...n,...e})),l},l.unuse=function(){d>0&&!--d&&(i(),i=null)},e.exports=l},9501:function(e,t,a){(t=a(8)(!1)).push([e.i,".MediaAdderV3-upload-box-collapsed{display:none}.MediaAdderV3-editor{animation-name:animate-in-v2;animation-duration:300ms;animation-delay:10ms;animation-fill-mode:forwards;opacity:0;padding:24px;padding-bottom:40px}@keyframes animate-in-v2{0%{transform:translateY(4px);opacity:0}5%{transform:translateY(4px);opacity:0}100%{transform:translateY(0px);opacity:1}}.MediaAdderV3-editor:not(:first-child){padding-top:32px;border-top:1px solid rgba(163,163,172,.2)}.MediaAdderV3-media-editors-container{max-height:816px}",""]),t.locals={confirmationGreen:"#53da33",confirmationGreenDesaturated:"#6cba50",gilded4:"#ecb200",gilded5:"#e0a900",gilded6:"#be8c00",errorRedDesaturated:"#df5353",gray:"#a3a3ac",bodyTextWhite:"#ececee",bodyTextWiteMask64:"rgba(236,236,238,.64)",border:"#848a94",errorRed:"#ff6b6b",warnYellow:"#ffb400",nuxBlue:"#008ae1",calendarOrange:"#d89332",calendarBlue:"#355bf8",calendarGreen:"#6cba50",calendarSeagreen:"#30a68f",calendarJewelgreen:"#148f33",calendarPurple:"#a250e8",calendarPurpleMask7:"rgba(162,80,232,.07)",calendarPurpleMask10:"rgba(162,80,232,.1)",mediumPurple3:"#dab9f6",mediumPurple3Mask10:"rgba(218,185,246,.1)",dropmenuGray:"#4f515d",menuGray:"#4f515d",menuGrayMask30:"rgba(79,81,93,.3)",yellowHighlight:"#ffeca0",desaturatedReddit:"#ea794f",desaturatedTwitter:"#64a9d4",desaturatedYoutube:"#cf5c58",whatsapp:"#25d366",github:"#24292e",vimeo:"#1ab7ea",gilded:"#f5c400",orangeRed:"#ff4500",gameNavBlack:"#32343d",gameNavBlackMask36:"rgba(50,52,61,.36)",white:"#fff",gilded2:"#f8d64c",gilded2Mask5:"rgba(248,214,76,.05)",gilded2Mask7:"rgba(248,214,76,.07)",gilded2Mask10:"rgba(248,214,76,.1)",gilded2Mask20:"rgba(248,214,76,.2)",gilded2Mask50:"rgba(248,214,76,.5)",nuxBlueDesaturatedMask7:"rgba(174,189,252,.07)",restGet:"#335a9e",restHead:"#a250e8",restPost:"#6cba50",restPut:"#d89332",restPatch:"#4f515d",restDelete:"#ff6b6b",mysteriousGray:"#212329",backgroundBlack:"#1e2025",yellowThree:"#ffb400",calendarGreenDesaturated:"#476047",calendarRed:"#df5353",calendarRedMask30:"rgba(223,83,83,.2)",calendarRedDesaturated:"#694148",druidOrange:"#e4b370",sidebarBlack:"#292b32",brandyPunch:"#d89332",navBlack:"#191b1f",yellow1:"gold",yellow2:"#e4c519",yellow3:"#ffb400",yellow4:"#ffb400",yellow5:"#d89f0c",yellow6:"#ffd800",yellow6Mask35:"rgba(255,216,0,.35)",gameNavGray:"#30323a",skeletonGray:"#50525f",blackPearl:"#222329",twitch:"#9146ff",bnet:"#078ad2",psn:"#00134c",xbox:"#1c6d00",steam:"#231f20",origin:"#e73b00",youtube:"red",twitter:"#1189f4",facebook:"#335a9e",switch:"#e60012",patreon:"#ff424d",roblox:"#00a2ff",epic:"#2f2d2e",bnetSecondary:"#009ae4",psnSecondary:"#2d64e6",xboxSecondary:"#52b043",steamSecondary:"#096295",twitchSecondary:"#9146ff",epicSecondary:"#0078f2",grayMask20:"rgba(163,163,172,.2)",grayMask40:"rgba(163,163,172,.4)",goldenShadow:"rgba(255,234,0,.5)",colorChannelGray:"#373943"},e.exports=t},9502:function(e,t,a){"use strict";var o=a(19),r=a(0);a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,o,r,i,v;return(0,p.default)(t=(0,h.default)(t=(0,g.default)(t=(0,m.default)(t=(0,O.observer)((v=i=class extends e{constructor(...e){var t,a;super(...e),a=this,(0,n.default)(this,"isSaving",o,this),this.originalMediaInfo=null===(t=this.props.media)||void 0===t?void 0:t.mediaInfo,(0,n.default)(this,"Confirm",r,this),this.OnCloseOverride=()=>this.OnCancelOverride(),this.OnCancelOverride=(0,d.coroutine)((function*(){const{isEditing:e,originalMediaInfo:t}=a,{media:o}=a.props;if(yield a.verifyNoUnsavedChanges())return e?o.updateMediaInfo(t):(a.PendingUploads.forEach(e=>a.CancelUpload(e)),a.CompletedUploads.forEach(e=>a.CancelUpload(e))),a.close()})),this.SaveMedia=function(){var e=(0,d.coroutine)((function*(e,t=!1){const{isEditing:o,teamId:r,gameId:i,userId:d,channelId:n}=a;try{const l=o?c.default.MediaEdited:c.default.MediaCreated,p=yield f.default.With(y.default.SaveMedia({media:M(M({},e.mediaInfo),{},{type:e.type||e.uploadFileType}),teamId:r,gameId:i,userId:d,channelId:n})).Log(l,{type:r?"team":"profile",userId:d,channelId:n,teamId:r,gameId:i,isMultiple:t,isFileUpload:e.isFileUpload});return e.isFileUpload?e.updateUploadInfo(p.mediaInfo):e.updateMediaInfo(p.mediaInfo),!t&&a.statusContext.displayStatus({text:o?"Your changes have been saved":"Your media has been added",type:"success"}),{media:e}}catch(o){if(a.statusContext.displayError({message:"Your media failed to save. Try again"}),a.CancelUpload(e),!t)throw o}}));return function(t){return e.apply(this,arguments)}}()}get Header(){const{title:e}=this.props,{isEditing:t}=this;return e||(t?"Edit details":"Add new media")}get ConfirmText(){return this.isEditing?"Save":"Done"}get Disabled(){const{isAllMediaValid:e,isSaving:t}=this;return!e||t||!!this.PendingUploads.length}get isEditing(){return!!this.props.media}get teamId(){const{media:e,teamId:t}=this.props;return(null==e?void 0:e.teamId)||t}get gameId(){const{gameId:e,media:t}=this.props;return(null==t?void 0:t.gameId)||e}get channelId(){const{channelId:e,media:t}=this.props;return(null==t?void 0:t.channelId)||e}get dynamicMediaType(){return this.props.dynamicMediaType}get userId(){const{userId:e,media:t}=this.props;return(null==t?void 0:t.userId)||e}get showControls(){const{isEditing:e}=this,{uploadOnly:t}=this.props;return!!s.default.IsNative||!t&&(e||!!(this.PendingUploads.length+this.CompletedUploads.length))}get hasMultipleMedia(){return this.PendingUploads.length+this.CompletedUploads.length>1}get isAllMediaValid(){const{PendingUploads:e,CompletedUploads:t,isEditing:a}=this,{media:o}=this.props;return a?o.mediaInfo.isValid:e.every(e=>e.mediaInfo.isValid)&&t.every(e=>e.mediaInfo.isValid)}OnUploadCompleted(e){const{uploadOnly:t,onConfirm:a}=this.props,{PendingUploads:o}=this,r=!o.length;t&&r&&a()}componentWillMount(){(0,u.default)(this.props.uploadOnly||this.userContext,"props.uploadOnly || this.userContext is required."),super.componentWillMount&&super.componentWillMount()}},i.displayName=e.displayName||e.name,a=v,o=(0,l.default)(a.prototype,"isSaving",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,l.default)(a.prototype,"Header",[b.computed],Object.getOwnPropertyDescriptor(a.prototype,"Header"),a.prototype),(0,l.default)(a.prototype,"ConfirmText",[b.computed],Object.getOwnPropertyDescriptor(a.prototype,"ConfirmText"),a.prototype),(0,l.default)(a.prototype,"Disabled",[b.computed],Object.getOwnPropertyDescriptor(a.prototype,"Disabled"),a.prototype),(0,l.default)(a.prototype,"isEditing",[b.computed],Object.getOwnPropertyDescriptor(a.prototype,"isEditing"),a.prototype),(0,l.default)(a.prototype,"teamId",[b.computed],Object.getOwnPropertyDescriptor(a.prototype,"teamId"),a.prototype),(0,l.default)(a.prototype,"gameId",[b.computed],Object.getOwnPropertyDescriptor(a.prototype,"gameId"),a.prototype),(0,l.default)(a.prototype,"channelId",[b.computed],Object.getOwnPropertyDescriptor(a.prototype,"channelId"),a.prototype),(0,l.default)(a.prototype,"dynamicMediaType",[b.computed],Object.getOwnPropertyDescriptor(a.prototype,"dynamicMediaType"),a.prototype),(0,l.default)(a.prototype,"userId",[b.computed],Object.getOwnPropertyDescriptor(a.prototype,"userId"),a.prototype),(0,l.default)(a.prototype,"showControls",[b.computed],Object.getOwnPropertyDescriptor(a.prototype,"showControls"),a.prototype),(0,l.default)(a.prototype,"hasMultipleMedia",[b.computed],Object.getOwnPropertyDescriptor(a.prototype,"hasMultipleMedia"),a.prototype),(0,l.default)(a.prototype,"isAllMediaValid",[b.computed],Object.getOwnPropertyDescriptor(a.prototype,"isAllMediaValid"),a.prototype),r=(0,l.default)(a.prototype,"Confirm",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,d.coroutine)((function*(){const{uploadOnly:t,media:a,allowMultiple:o}=e.props,{isEditing:r}=e;if(t){if(!o&&!e.CompletedUploads.length)throw new Error("No media uploaded");return{media:o?e.CompletedUploads:e.CompletedUploads[0]}}if(!(yield e.userContext.EnsureRegistered()))throw e.statusContext.displayError({message:"Must be registered to upload media"}),new Error("Not registered");(0,b.runInAction)(()=>e.isSaving=!0);let i=null;return!r||a.isFileUpload&&!a.id?(e.PendingUploads.forEach(e=>e.updateUploadInfo({persist:!0})),yield d.default.map(e.CompletedUploads,t=>e.SaveMedia(t,!!e.CompletedUploads.length),{concurrency:s.default.IsDesktop?4:2}),i={media:o?[...e.CompletedUploads,...e.PendingUploads]:e.CompletedUploads[0]},e.CompletedUploads.forEach(t=>e.RemoveUpload(t))):i=yield e.SaveMedia(a),(0,b.runInAction)(()=>e.isSaving=!1),i}))}}),t=a))||t)||t)||t)||t)||t};var i=r(a(15)),d=o(a(14)),n=r(a(12)),l=r(a(3)),p=(r(a(13)),r(a(204))),s=r(a(18)),u=r(a(17)),c=r(a(35)),f=r(a(42)),y=r(a(5284)),m=r(a(46)),g=r(a(22)),h=r(a(5094)),b=a(2),O=a(4);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},9503:function(e,t,a){var o=a(7),r=a(9504);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i,d=0,n={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};r.locals&&(l.locals=r.locals),l.use=function(e){return d++||(i=o(r,{...n,...e})),l},l.unuse=function(){d>0&&!--d&&(i(),i=null)},e.exports=l},9504:function(e,t,a){(t=a(8)(!1)).push([e.i,".AddMediaOverlay-media-adder{position:relative;z-index:1}",""]),e.exports=t}}]);
//# sourceMappingURL=https://sourcemaps.local.guilded.gg/db0e2dcb/AddMediaOverlay.js.map